<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nova Remains - Jogo de Ação 2D</title>
    <meta name="description" content="Nova Remains - Jogo de ação 2D com sistema de combate dinâmico e heróis únicos">
    <meta name="keywords" content="jogo, ação, 2d, nova remains, combate, rpg, heróis, aventura">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="css/visual-design.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Press+Start+2P&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Otimizações de performance */
        * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            background: #0f0f23;
            position: relative;
        }

        /* Fundo de Estrelas Global */
        .global-starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: radial-gradient(ellipse at center, #1a1a2e 0%, #0f0f23 100%);
        }

        .global-starfield-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        #gameCanvas {
            image-rendering: pixelated;
            image-rendering: -moz-crisp-edges;
            image-rendering: crisp-edges;
        }
        
        /* Loading screen otimizado */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid #4a90e2;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: white;
            font-size: 1.2em;
            font-weight: bold;
        }
        
        /* Performance indicators */
        .fps-counter {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0, 0, 0, 0.7);
            color: #00ff00;
            padding: 5px 10px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            z-index: 1000;
        }
        
        /* Version info */
        .version-info {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9em;
            margin-top: 10px;
            font-weight: 300;
        }

        /* Fundo Animado de Estrelas - Dentro da Janela do Jogo */
        .starfield-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background: radial-gradient(ellipse at center, #1a1a2e 0%, #0f0f23 100%);
            border-radius: 12px;
            overflow: hidden;
        }

        .starfield-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        /* Aurora Background - Dentro da Janela do Jogo */
        .aurora-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(125% 125% at 50% 0%, #0f0f23 50%, #4f46e5);
            opacity: 0.6;
            z-index: 2;
            animation: auroraShift 10s ease-in-out infinite alternate;
            border-radius: 12px;
        }

        @keyframes auroraShift {
            0% { background: radial-gradient(125% 125% at 50% 0%, #0f0f23 50%, #4f46e5); }
            25% { background: radial-gradient(125% 125% at 50% 0%, #0f0f23 50%, #7c3aed); }
            50% { background: radial-gradient(125% 125% at 50% 0%, #0f0f23 50%, #ec4899); }
            75% { background: radial-gradient(125% 125% at 50% 0%, #0f0f23 50%, #06b6d4); }
            100% { background: radial-gradient(125% 125% at 50% 0%, #0f0f23 50%, #4f46e5); }
        }


        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            max-width: 1200px;
            width: 100%;
            animation: fadeInUp 1s ease-out 0.3s both;
        }

        .menu-card {
            position: relative;
            background: linear-gradient(135deg, rgba(0,0,0,0.7) 0%, rgba(0,0,0,0.4) 100%);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 1.5rem;
            padding: 2rem;
            cursor: pointer;
            transition: all 0.3s ease;
            overflow: hidden;
            min-height: 200px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .menu-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.1) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s ease;
        }

        .menu-card:hover::before {
            transform: translateX(100%);
        }

        .menu-card:hover {
            transform: translateY(-10px) rotateY(5deg);
            border-color: rgba(255, 255, 255, 0.3);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        .menu-card-icon {
            width: 4rem;
            height: 4rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 1rem;
            transition: transform 0.3s ease;
        }

        .menu-card:hover .menu-card-icon {
            transform: scale(1.1);
        }

        .menu-card-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
            transition: color 0.3s ease;
        }

        .menu-card:hover .menu-card-title {
            color: #fbbf24;
        }

        .menu-card-description {
            font-size: 0.875rem;
            color: #94a3b8;
            line-height: 1.5;
        }

        .status-indicator {
            position: absolute;
            top: 1rem;
            right: 1rem;
            width: 0.5rem;
            height: 0.5rem;
            background: #fbbf24;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Modais Modernos */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: none;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }

        .modal-content {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.9), rgba(30, 41, 59, 0.9));
            backdrop-filter: blur(20px);
            border: 2px solid rgba(168, 85, 247, 0.3);
            border-radius: 1.5rem;
            padding: 2rem;
            max-width: 90vw;
            max-height: 80vh;
            overflow-y: auto;
            overflow-x: hidden;
            position: relative;
            animation: modalSlideIn 0.3s ease-out;
            box-sizing: border-box;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.9) translateY(-50px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .modal-title {
            font-size: 1.875rem;
            font-weight: 700;
            color: white;
        }

        .close-btn {
            background: rgba(239, 68, 68, 0.2);
            border: none;
            color: #ef4444;
            width: 2.5rem;
            height: 2.5rem;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(239, 68, 68, 0.3);
            transform: scale(1.1);
        }

        /* Hero Selection */
        .heroes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .hero-card {
            background: linear-gradient(135deg, rgba(30, 41, 59, 0.5), rgba(15, 23, 42, 0.8));
            border: 2px solid rgba(168, 85, 247, 0.3);
            border-radius: 1rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .hero-card:hover {
            transform: scale(1.05);
            border-color: #fbbf24;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(168, 85, 247, 0.2));
        }

        .hero-card.selected {
            border-color: #fbbf24;
            background: linear-gradient(135deg, rgba(251, 191, 36, 0.2), rgba(168, 85, 247, 0.2));
        }

        .hero-avatar {
            width: 4rem;
            height: 4rem;
            border-radius: 50%;
            background: linear-gradient(135deg, #ef4444, #f97316);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 1rem;
            box-shadow: 0 0 20px rgba(239, 68, 68, 0.3);
        }

        .hero-name {
            font-size: 1.25rem;
            font-weight: 600;
            text-align: center;
            margin-bottom: 0.5rem;
        }

        .hero-class {
            text-align: center;
            color: #a855f7;
            font-size: 0.875rem;
            margin-bottom: 1rem;
        }

        .hero-stats {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .stat-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.875rem;
        }

        .stat-bar {
            width: 100%;
            height: 0.5rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 0.25rem;
            overflow: hidden;
            margin-top: 0.25rem;
        }

        .stat-fill {
            height: 100%;
            border-radius: 0.25rem;
            transition: width 0.3s ease;
        }

        .stat-fill.attack { background: linear-gradient(90deg, #ef4444, #f97316); }
        .stat-fill.defense { background: linear-gradient(90deg, #3b82f6, #06b6d4); }
        .stat-fill.speed { background: linear-gradient(90deg, #10b981, #34d399); }

        /* Botões Modernos */
        .btn-modern {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 0.75rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(135deg, #fbbf24, #f59e0b);
            color: #1f2937;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(251, 191, 36, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }

        .btn-secondary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.4);
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .menu-grid {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .game-title {
                font-size: 3rem;
            }
            
            .modal-content {
                padding: 1.5rem;
                margin: 1rem;
            }
        }
        
        /* Botões otimizados */
        .menu-btn {
            position: relative;
            overflow: hidden;
        }
        
        .menu-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .menu-btn:hover::before {
            left: 100%;
        }
        
        /* Acessibilidade */
        .menu-btn:focus {
            outline: 3px solid #ffd700;
            outline-offset: 2px;
        }
        
        /* Animações suaves */
        .menu-section {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .menu-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        /* Layout centralizado */
        .main-container {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #1e3c72, #2a5298, #4a90e2);
            overflow: hidden;
            position: relative;
        }
        
        .game-window {
            width: 75%;
            height: 85%;
            background: #000;
            position: relative;
            border: 4px solid #8B4513;
            border-radius: 0;
            box-shadow: 
                inset 4px 4px 0px #A0522D,
                inset -4px -4px 0px #654321,
                8px 8px 0px #000;
            image-rendering: pixelated;
            overflow: hidden;
            contain: layout;
            max-width: 1200px;
            max-height: 800px;
        }
        
        /* Garantir que todas as telas fiquem dentro do game-window */
        .game-window > div {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        /* Scroll personalizado para telas principais */
        .game-window > div::-webkit-scrollbar {
            width: 8px;
        }
        
        .game-window > div::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.3);
        }
        
        .game-window > div::-webkit-scrollbar-thumb {
            background: #8B4513;
            border-radius: 4px;
        }
        
        .game-window > div::-webkit-scrollbar-thumb:hover {
            background: #A0522D;
        }
        
        /* Telas específicas que precisam de scroll */
        .character-selection-screen,
        .world-map-screen {
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        /* Modais e menus com scroll específico */
        .modal-content,
        .submenu-content {
            max-height: 80vh;
            overflow-y: auto;
        }
        
        /* Menu principal adaptado para painel lateral */
        #mainMenu {
            position: relative;
            width: 100%;
            height: auto;
            background: transparent;
            box-shadow: none;
            margin: 0;
            padding: 0;
        }
        
        .menu-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .menu-subtitle {
            font-size: 1.1em;
        }
        
        .menu-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            margin-top: 40px;
        }
        
        .menu-section {
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }
        
        .menu-section h2 {
            font-size: 1.3em;
            margin-bottom: 15px;
        }
        
        .menu-btn {
            padding: 15px 30px;
            font-size: 1.1em;
            margin: 8px 0;
            min-width: 200px;
        }
        
        .menu-btn.primary {
            font-size: 1.2em;
            padding: 18px 35px;
            min-width: 220px;
        }
        
        /* Canvas do jogo */
        #gameCanvas {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            border: 3px solid #fff;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
        }
        
        /* UI do jogo posicionada sobre o canvas */
        #ui {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 10;
            display: none; /* Oculto por padrão */
        }
        
        
        
        /* Responsividade para telas menores */
        @media (max-width: 1200px) {
            .menu-panel {
                width: 35%;
            }
            
            .game-panel {
                width: 65%;
            }
        }
        
        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
            
            .menu-panel {
                width: 100%;
                height: 40vh;
            }
            
            .game-panel {
                width: 100%;
                height: 60vh;
            }
            
            .menu-content {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .character-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
                padding: 15px;
            }
            
            .character-card {
                padding: 10px;
                min-height: 250px;
            }
            
            .character-preview {
                width: 50px;
                height: 50px;
                margin: 0 auto 8px;
            }
            
            .character-sprite {
                font-size: 25px;
            }
            
            .character-card h3 {
                font-size: 12px;
            }
            
            .character-stats .stat {
                font-size: 9px;
            }
            
            .character-description {
                font-size: 8px;
                min-height: 20px;
            }
            
            .select-character {
                padding: 5px 10px;
                font-size: 9px;
            }
        }
        
        .character-sprite {
            font-size: 30px;
            filter: drop-shadow(2px 2px 0px #000);
        }
        
        /* Grid de personagens lado a lado */
        .character-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-width: 100%;
            margin: 0 auto;
            padding: 20px;
            height: 100%;
            overflow-y: auto;
        }
        
        .character-card {
            background: #8B4513;
            border: 3px solid #654321;
            border-radius: 0;
            padding: 12px;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            box-shadow: 
                inset 2px 2px 0px #A0522D,
                inset -2px -2px 0px #654321,
                2px 2px 0px #000;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        
        .character-card:hover {
            background: #A0522D;
            border-color: #FFD700;
            transform: translateY(-5px) scale(1.02);
            box-shadow: 
                inset 2px 2px 0px #CD853F,
                inset -2px -2px 0px #8B4513,
                4px 4px 0px #000,
                0 8px 16px rgba(255, 215, 0, 0.3);
        }
        
        .character-card:active {
            transform: translateY(-2px) scale(1.01);
            box-shadow: 
                inset 2px 2px 0px #CD853F,
                inset -2px -2px 0px #8B4513,
                2px 2px 0px #000;
        }
        
        .character-preview {
            width: 60px;
            height: 60px;
            margin: 0 auto 10px;
            border: 3px solid #000;
            border-radius: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
            box-shadow: 
                inset 2px 2px 0px rgba(255, 255, 255, 0.3),
                inset -2px -2px 0px rgba(0, 0, 0, 0.3),
                2px 2px 0px #000;
        }
        
        .character-card:hover .character-preview {
            transform: scale(1.1);
            box-shadow: 
                inset 2px 2px 0px rgba(255, 255, 255, 0.5),
                inset -2px -2px 0px rgba(0, 0, 0, 0.2),
                3px 3px 0px #000,
                0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        .character-card h3 {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin-bottom: 8px;
            text-shadow: 1px 1px 0px #000;
            font-weight: bold;
        }
        
        .character-card:hover h3 {
            color: #FFF;
            text-shadow: 2px 2px 0px #000, 0 0 5px rgba(255, 215, 0, 0.8);
        }
        
        .character-stats {
            margin: 10px 0;
            padding: 8px;
            background: rgba(0, 0, 0, 0.4);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 0;
        }
        
        .character-card:hover .character-stats {
            background: rgba(0, 0, 0, 0.6);
            border-color: rgba(255, 215, 0, 0.5);
        }
        
        .character-stats .stat {
            color: #FFF;
            font-size: 10px;
            margin: 3px 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-family: 'Courier New', monospace;
        }
        
        .character-card:hover .character-stats .stat {
            color: #FFD700;
        }
        
        .character-description {
            color: #FFF;
            font-family: 'Courier New', monospace;
            font-size: 9px;
            text-align: center;
            margin: 8px 0;
            line-height: 1.2;
            min-height: 25px;
        }
        
        .character-card:hover .character-description {
            color: #FFD700;
        }
        
        .select-character {
            background: #228B22;
            color: #FFF;
            border: 2px solid #32CD32;
            padding: 6px 12px;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            width: 100%;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .select-character:hover {
            background: #32CD32;
            transform: translateY(-1px);
            box-shadow: 2px 2px 0px #000;
        }
        
        .select-character:active {
            transform: translateY(0px);
            box-shadow: 1px 1px 0px #000;
        }
        
        .character-card:hover .select-character {
            background: #FFD700;
            color: #000;
            border-color: #FFA500;
        }
        
        .character-card:hover .select-character:hover {
            background: #FFA500;
        }
        
        /* Estilo Pixel Art para UI do Jogo */
        #healthBar, #manaBar {
            width: 220px;
            height: 20px;
            background: #000;
            border: 2px solid #8B4513;
            margin: 5px 0;
            position: relative;
            border-radius: 0;
            box-shadow: 
                inset 2px 2px 0px #654321,
                inset -2px -2px 0px #A0522D,
                2px 2px 0px #000;
            image-rendering: pixelated;
        }
        
        .ui-info {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-top: 10px;
        }
        
        .level-display, .gold-display, .exp-display {
            background: rgba(0, 0, 0, 0.8);
            color: #FFD700;
            padding: 6px 12px;
            border: 2px solid #8B4513;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            font-weight: bold;
            text-align: center;
            box-shadow: 2px 2px 0px #000;
        }
        
        .exp-display {
            color: #00FF00;
        }
        
        #healthFill {
            height: 100%;
            background: #ff0000;
            border-radius: 0;
            transition: width 0.3s ease;
            box-shadow: inset 1px 1px 0px #ff6666;
        }
        
        #manaFill {
            height: 100%;
            background: #0066ff;
            border-radius: 0;
            transition: width 0.3s ease;
            box-shadow: inset 1px 1px 0px #66aaff;
        }
        
        #healthText, #manaText {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #FFD700;
            font-weight: bold;
            text-shadow: 1px 1px 0px #000;
            font-family: 'Courier New', monospace;
            font-size: 10px;
        }
        
        #level, #exp {
            color: #FFD700;
            font-weight: bold;
            text-shadow: 1px 1px 0px #000;
            margin: 3px 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        
        /* Estilo Pixel Art para Mapa Mundo - Tela Cheia */
        .world-map-container {
            display: flex;
            gap: 20px;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            flex: 1;
            overflow: hidden;
        }
        
        .world-map {
            flex: 1;
            position: relative;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 30% 20%, rgba(255, 215, 0, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 70% 80%, rgba(135, 206, 235, 0.2) 0%, transparent 50%),
                radial-gradient(circle at 50% 50%, rgba(147, 112, 219, 0.1) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #533483 100%);
            border: 4px solid #FFD700;
            border-radius: 0;
            box-shadow: 
                inset 4px 4px 0px #FFA500,
                inset -4px -4px 0px #FF8C00,
                4px 4px 0px #000,
                0 0 20px rgba(255, 215, 0, 0.3);
            image-rendering: pixelated;
            overflow: hidden;
        }
        
        .map-location {
            position: absolute;
            cursor: pointer;
            text-align: center;
            transition: all 0.2s ease;
            transform: translate(-50%, -50%);
        }
        
        .map-location:hover {
            transform: translate(-50%, -50%) scale(1.1);
        }
        
        .location-icon {
            font-size: 32px;
            margin-bottom: 5px;
            filter: drop-shadow(2px 2px 0px #000);
        }
        
        .location-name {
            background: #8B4513;
            color: #FFD700;
            padding: 4px 8px;
            border: 2px solid #654321;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 
                inset 1px 1px 0px #A0522D,
                inset -1px -1px 0px #654321,
                2px 2px 0px #000;
            white-space: nowrap;
        }
        
        .map-info {
            width: 300px;
            background: #8B4513;
            border: 3px solid #654321;
            border-radius: 0;
            padding: 20px;
            box-shadow: 
                inset 3px 3px 0px #A0522D,
                inset -3px -3px 0px #654321,
                3px 3px 0px #000;
        }
        
        .map-info h3 {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            margin-bottom: 10px;
            text-shadow: 1px 1px 0px #000;
        }
        
        .world-map-actions {
            margin-top: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .world-map-actions .menu-btn {
            width: 100%;
            padding: 12px;
            font-size: 14px;
            background: #8B4513;
            color: #FFD700;
            border: 2px solid #654321;
            border-radius: 0;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: all 0.2s ease;
            box-shadow: 2px 2px 0px #654321;
        }
        
        .world-map-actions .menu-btn:hover {
            background: #A0522D;
            transform: translateY(-2px);
            box-shadow: 4px 4px 0px #654321;
        }
        
        .world-map-actions .menu-btn:active {
            transform: translateY(0px);
            box-shadow: 1px 1px 0px #654321;
        }
npm
        /* Mapa Mundi Moderno */
        .world-map-modern {
            display: flex;
            gap: 20px;
            width: 100%;
            height: 100%;
            padding: 20px;
            box-sizing: border-box;
            overflow: hidden;
        }
        
        .map-container {
            flex: 2;
            position: relative;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            overflow: hidden;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .map-sidebar {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
            overflow-y: auto;
        }
        
        .sidebar-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .sidebar-section h3 {
            margin: 0 0 15px 0;
            color: #3b82f6;
            font-size: 18px;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
        }
        
        /* Inventário Compacto */
        .inventory-compact {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }
        
        .inventory-slot {
            aspect-ratio: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            transition: all 0.2s ease;
        }
        
        .inventory-slot:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.05);
        }
        
        /* Loja Compacta */
        .shop-compact {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .shop-categories {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        
        .category-btn {
            background: rgba(255, 255, 255, 0.1);
            color: #e5e7eb;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .category-btn.active {
            background: #3b82f6;
            color: white;
        }
        
        .category-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .shop-items {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .shop-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 6px;
            font-size: 12px;
        }
        
        .item-icon {
            font-size: 16px;
        }
        
        .item-name {
            flex: 1;
            color: #e5e7eb;
        }
        
        .item-price {
            color: #fbbf24;
            font-weight: 600;
        }
        
        /* Ações Rápidas */
        .quick-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .btn-modern {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }
        
        .btn-modern:hover {
            background: linear-gradient(135deg, #1d4ed8, #1e40af);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        /* Inventário Moderno */
        .inventory-modern {
            display: flex;
            gap: 20px;
            height: 100%;
        }
        
        .inventory-main {
            flex: 2;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .inventory-info {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .inventory-info h3 {
            margin: 0 0 15px 0;
            color: #3b82f6;
            font-size: 18px;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
        }
        
        .equipped-items {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .equipped-slot {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .equipped-slot label {
            color: #e5e7eb;
            font-weight: 500;
            min-width: 80px;
        }
        
        .equipped-item {
            color: #9ca3af;
            font-style: italic;
        }
        
        .item-details {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .gold-display {
            display: flex;
            align-items: center;
            gap: 8px;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .gold-icon {
            font-size: 16px;
        }
        
        #playerGold {
            color: #fbbf24;
            font-weight: 600;
            font-size: 16px;
        }

        /* Loja Moderna */
        .shop-modern {
            display: flex;
            flex-direction: column;
            gap: 20px;
            height: 100%;
        }
        
        .shop-modern .shop-categories {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .shop-modern .category-btn {
            background: rgba(255, 255, 255, 0.1);
            color: #e5e7eb;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
        }
        
        .shop-modern .category-btn.active {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .shop-modern .category-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .shop-main {
            display: flex;
            gap: 20px;
            flex: 1;
        }
        
        .shop-modern .shop-items {
            flex: 2;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .shop-modern .shop-info {
            flex: 1;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .shop-modern .shop-info h3 {
            margin: 0 0 15px 0;
            color: #3b82f6;
            font-size: 18px;
            font-weight: 600;
            font-family: 'Inter', sans-serif;
        }

        /* Missões Modernas */
        .missions-modern {
            display: flex;
            flex-direction: column;
            gap: 20px;
            height: 100%;
        }
        
        .missions-modern .missions-tabs {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .mission-tab {
            background: rgba(255, 255, 255, 0.1);
            color: #e5e7eb;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 12px 20px;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
        }
        
        .mission-tab.active {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .mission-tab:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }
        
        .missions-map {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .location-section {
            margin-bottom: 30px;
        }
        
        .location-section h3 {
            color: #3b82f6;
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 15px;
            font-family: 'Inter', sans-serif;
        }
        
        .missions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .mission-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }
        
        .mission-card:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
        
        .mission-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 15px;
        }
        
        .mission-info h4 {
            color: #e5e7eb;
            font-size: 16px;
            font-weight: 600;
            margin: 0 0 8px 0;
            font-family: 'Inter', sans-serif;
        }
        
        .mission-info p {
            color: #9ca3af;
            font-size: 14px;
            margin: 0 0 15px 0;
            line-height: 1.4;
        }
        
        .mission-details {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }
        
        .mission-details span {
            background: rgba(59, 130, 246, 0.2);
            color: #3b82f6;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .mission-rewards {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .mission-rewards span {
            color: #fbbf24;
            font-size: 12px;
            font-weight: 600;
        }
        
        .mission-select-btn {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            width: 100%;
        }
        
        .mission-select-btn:hover {
            background: linear-gradient(135deg, #1d4ed8, #1e40af);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .player-info {
            display: flex;
            align-items: center;
            gap: 15px;
            background: rgba(255, 255, 255, 0.1);
            padding: 8px 16px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .player-level, .player-name, .player-gold {
            color: #e5e7eb;
            font-size: 14px;
            font-weight: 500;
        }
        
        .player-gold {
            color: #fbbf24;
        }
        
        .map-info p {
            color: #FFF;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin-bottom: 15px;
            line-height: 1.4;
        }
        
        .location-details {
            background: #000;
            border: 2px solid #654321;
            padding: 15px;
            border-radius: 0;
            min-height: 100px;
        }
        
        .location-details p {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            margin: 0;
        }
        
        /* Submenus Modernos com Glassmorphism */
        .submenu {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            backdrop-filter: blur(20px);
            z-index: 1000;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            border-radius: 12px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        
        .submenu-content {
            flex: 1;
            padding: 20px;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
            overflow-x: hidden;
            position: relative;
            max-height: 70vh;
            box-sizing: border-box;
        }
        
        .submenu-header {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(29, 78, 216, 0.8));
            color: white;
            padding: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 15px;
            backdrop-filter: blur(10px);
        }
        
        .submenu-header h2 {
            margin: 0;
            font-size: 24px;
            font-weight: 600;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            font-family: 'Inter', sans-serif;
        }
        
        .back-btn {
            background: rgba(255, 255, 255, 0.1);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 8px;
            font-family: 'Inter', sans-serif;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .back-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
        }
        
        /* Ajustar posicionamento dos elementos dentro da janela */
        #ui {
            position: absolute;
            top: 15px;
            left: 15px;
            display: none; /* Oculto por padrão */
            flex-direction: column;
            gap: 12px;
            z-index: 10;
        }
        
        
        
        /* Canvas responsivo dentro da janela - DESABILITADO */
        #gameCanvas {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            border: 2px solid #8B4513;
            border-radius: 0;
            box-shadow: 
                inset 2px 2px 0px #A0522D,
                inset -2px -2px 0px #654321,
                2px 2px 0px #000;
            display: none; /* Canvas desabilitado por enquanto */
        }
        
        /* Menu Principal - Dentro da Janela */
        #mainMenu {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.2) 0%, transparent 50%),
                linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #533483 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            overflow-y: auto;
            padding: 20px;
            box-sizing: border-box;
            position: relative;
        }
        
        #mainMenu::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: 
                radial-gradient(2px 2px at 20px 30px, #eee, transparent),
                radial-gradient(2px 2px at 40px 70px, rgba(255,255,255,0.8), transparent),
                radial-gradient(1px 1px at 90px 40px, #fff, transparent),
                radial-gradient(1px 1px at 130px 80px, rgba(255,255,255,0.6), transparent),
                radial-gradient(2px 2px at 160px 30px, #eee, transparent);
            background-repeat: repeat;
            background-size: 200px 100px;
            animation: twinkle 4s ease-in-out infinite alternate;
            pointer-events: none;
        }
        
        @keyframes twinkle {
            0% { opacity: 0.3; }
            100% { opacity: 1; }
        }
        
        /* Ajustar tamanho dos botões para a janela menor */
        .menu-btn {
            padding: 12px 25px;
            font-size: 1em;
            margin: 6px 0;
            min-width: 180px;
        }
        
        .menu-btn.primary {
            font-size: 1.1em;
            padding: 15px 30px;
            min-width: 200px;
        }
        
        /* Ajustar título para janela menor */
        .menu-header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #ffd700, #ff6b6b, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: cosmicGlow 3s ease-in-out infinite alternate;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            position: relative;
            z-index: 1;
        }
        
        @keyframes cosmicGlow {
            0% { 
                background-position: 0% 50%;
                filter: hue-rotate(0deg);
            }
            100% { 
                background-position: 100% 50%;
                filter: hue-rotate(360deg);
            }
        }
        
        .menu-subtitle {
            font-size: 1.2em;
            color: #87CEEB;
            text-shadow: 0 0 10px rgba(135, 206, 235, 0.8);
            animation: starShimmer 2s ease-in-out infinite alternate;
            position: relative;
            z-index: 1;
        }
        
        @keyframes starShimmer {
            0% { 
                color: #87CEEB;
                text-shadow: 0 0 10px rgba(135, 206, 235, 0.8);
            }
            100% { 
                color: #FFD700;
                text-shadow: 0 0 15px rgba(255, 215, 0, 0.9);
            }
        }
        
        /* Janela de Chat */
        .chat-window {
            position: absolute;
            bottom: 20px;
            right: 20px;
            width: 300px;
            height: 200px;
            background: #8B4513;
            border: 3px solid #654321;
            border-radius: 0;
            box-shadow: 
                inset 3px 3px 0px #A0522D,
                inset -3px -3px 0px #654321,
                3px 3px 0px #000;
            image-rendering: pixelated;
            z-index: 100;
            display: flex;
            flex-direction: column;
        }
        
        .chat-header {
            background: #654321;
            color: #FFD700;
            padding: 8px 12px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 2px solid #8B4513;
        }
        
        .chat-messages {
            flex: 1;
            padding: 10px;
            overflow-y: auto;
            background: #000;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            color: #FFF;
            line-height: 1.3;
        }
        
        .chat-input-container {
            display: flex;
            border-top: 2px solid #654321;
        }
        
        .chat-input {
            flex: 1;
            background: #000;
            color: #FFF;
            border: none;
            padding: 8px 12px;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            outline: none;
        }
        
        .chat-send {
            background: #654321;
            color: #FFD700;
            border: none;
            padding: 8px 12px;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            font-weight: bold;
            cursor: pointer;
            border-left: 2px solid #8B4513;
        }
        
        .chat-send:hover {
            background: #8B4513;
        }
        
        .chat-message {
            margin-bottom: 5px;
            word-wrap: break-word;
        }
        
        .chat-message.system {
            color: #FFD700;
            font-style: italic;
        }
        
        .chat-message.player {
            color: #87CEEB;
        }
        
        .chat-message.npc {
            color: #98FB98;
        }
        
        /* Sistema de Loja e Inventário */
        .gold-display {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 14px;
        }
        
        .gold-icon {
            font-size: 16px;
        }
        
        .inventory-main {
            display: flex;
            gap: 20px;
            height: 100%;
        }
        
        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 8px;
            width: 300px;
            height: 400px;
            overflow-y: auto;
            padding: 10px;
            background: #000;
            border: 2px solid #654321;
            border-radius: 0;
        }
        
        .inventory-slot {
            width: 50px;
            height: 50px;
            background: #696969;
            border: 2px solid #8B4513;
            border-radius: 0;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            transition: all 0.2s ease;
        }
        
        .inventory-slot:hover {
            background: #A0522D;
            border-color: #FFD700;
        }
        
        .inventory-slot.equipped {
            background: #FFD700;
            border-color: #FFA500;
        }
        
        .inventory-slot .item-icon {
            width: 40px;
            height: 40px;
            image-rendering: pixelated;
        }
        
        .inventory-slot .item-quantity {
            position: absolute;
            bottom: 2px;
            right: 2px;
            background: #000;
            color: #FFF;
            font-size: 10px;
            padding: 1px 3px;
            border-radius: 0;
            font-family: 'Courier New', monospace;
        }
        
        .equipped-items {
            margin-bottom: 20px;
        }
        
        .equipped-slot {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 8px;
            background: #000;
            border: 1px solid #654321;
            border-radius: 0;
        }
        
        .equipped-slot label {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        
        .equipped-item {
            color: #FFF;
            font-family: 'Courier New', monospace;
            font-size: 11px;
        }
        
        .shop-content {
            display: flex;
            flex-direction: column;
            height: 100%;
            flex: 1;
            overflow: hidden;
        }
        
        .shop-categories {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .category-btn {
            background: #654321;
            color: #FFD700;
            border: 2px solid #8B4513;
            padding: 8px 15px;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .category-btn:hover {
            background: #8B4513;
        }
        
        .category-btn.active {
            background: #FFD700;
            color: #000;
            border-color: #FFA500;
        }
        
        .shop-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            flex: 1;
            overflow-y: auto;
            padding: 10px;
            background: #000;
            border: 2px solid #654321;
            border-radius: 0;
        }
        
        .shop-item {
            background: #8B4513;
            border: 2px solid #654321;
            border-radius: 0;
            padding: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: center;
        }
        
        .shop-item:hover {
            background: #A0522D;
            border-color: #FFD700;
        }
        
        .shop-item .item-icon {
            width: 40px;
            height: 40px;
            margin: 0 auto 8px;
            image-rendering: pixelated;
        }
        
        .shop-item .item-name {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .shop-item .item-price {
            color: #FFF;
            font-family: 'Courier New', monospace;
            font-size: 10px;
        }
        
        .shop-item .item-quantity {
            color: #90EE90;
            font-family: 'Courier New', monospace;
            font-size: 9px;
            margin-top: 3px;
        }
        
        .shop-info {
            width: 300px;
            background: #8B4513;
            border: 2px solid #654321;
            border-radius: 0;
            padding: 15px;
        }
        
        .shop-info h3 {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .item-details {
            color: #FFF;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            line-height: 1.4;
        }
        
        .item-details h4 {
            color: #FFD700;
            font-size: 12px;
            margin-bottom: 8px;
        }
        
        .item-details .item-stats {
            margin: 8px 0;
        }
        
        .item-details .item-stats span {
            display: block;
            margin: 2px 0;
        }
        
        .buy-btn {
            background: #228B22;
            color: #FFF;
            border: 2px solid #32CD32;
            padding: 6px 12px;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }
        
        .buy-btn:hover {
            background: #32CD32;
        }
        
        .buy-btn:disabled {
            background: #696969;
            border-color: #808080;
            cursor: not-allowed;
        }
        
        /* Sistema de Missões */
        .player-info {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        
        .missions-content {
            flex: 1;
            overflow: hidden;
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
        }
        
        .missions-map {
            padding: 20px;
            display: block;
            position: relative;
            z-index: 1;
        }
        
        #missionsContainer {
            display: block !important;
            position: relative;
            z-index: 1;
        }
        
        #roomsContainer {
            display: none;
            position: relative;
            z-index: 1;
        }
        
        #createRoomContainer {
            display: none;
            position: relative;
            z-index: 1;
        }
        
        #roomLobbyContainer {
            display: none;
            position: relative;
            z-index: 1;
        }
        
        .location-section {
            margin-bottom: 30px;
        }
        
        .location-section h3 {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 18px;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .missions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .mission-card {
            background: #8B4513;
            border: 3px solid #654321;
            border-radius: 0;
            padding: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .mission-card:hover {
            background: #A0522D;
            border-color: #FFD700;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
        }
        
        .mission-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px;
            margin: 0 auto 10px;
            border: 3px solid #000;
        }
        
        .mission-info h4 {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin-bottom: 8px;
            text-align: center;
        }
        
        .mission-info p {
            color: #FFF;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            margin-bottom: 10px;
            text-align: center;
            line-height: 1.3;
        }
        
        .mission-details {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .mission-details span {
            color: #FFF;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            background: #000;
            padding: 2px 6px;
            border-radius: 0;
        }
        
        .mission-rewards {
            display: flex;
            justify-content: space-around;
            margin-bottom: 10px;
        }
        
        .mission-rewards span {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            font-weight: bold;
        }
        
        .mission-select-btn {
            background: #228B22;
            color: #FFF;
            border: 2px solid #32CD32;
            padding: 8px 15px;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: all 0.2s ease;
        }
        
        .mission-select-btn:hover {
            background: #32CD32;
            transform: translateY(1px);
        }
        
        /* Sistema de Salas */
        .rooms-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: #654321;
            border-bottom: 3px solid #8B4513;
        }
        
        .rooms-header h2 {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 16px;
        }
        
        .create-room-btn {
            background: #228B22;
            color: #FFF;
            border: 2px solid #32CD32;
            padding: 8px 15px;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .create-room-btn:hover {
            background: #32CD32;
        }
        
        .rooms-list {
            padding: 20px;
        }
        
        .no-rooms {
            text-align: center;
            padding: 40px;
            color: #FFF;
            font-family: 'Courier New', monospace;
        }
        
        .no-rooms p {
            margin-bottom: 20px;
            font-size: 14px;
        }
        
        .room-card {
            background: #8B4513;
            border: 2px solid #654321;
            border-radius: 0;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.2s ease;
        }
        
        .room-card:hover {
            background: #A0522D;
            border-color: #FFD700;
        }
        
        .room-info h4 {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin-bottom: 5px;
        }
        
        .room-details {
            display: flex;
            gap: 10px;
        }
        
        .room-details span {
            color: #FFF;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            background: #000;
            padding: 2px 6px;
            border-radius: 0;
        }
        
        .room-players {
            display: flex;
            gap: 5px;
            flex-wrap: wrap;
        }
        
        .player-avatar {
            width: 30px;
            height: 30px;
            background: #654321;
            border: 1px solid #8B4513;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            position: relative;
        }
        
        .player-avatar.ready {
            background: #228B22;
            border-color: #32CD32;
        }
        
        .player-avatar .character-icon {
            font-size: 14px;
        }
        
        .room-actions {
            display: flex;
            gap: 10px;
        }
        
        .join-room-btn, .leave-room-btn {
            background: #228B22;
            color: #FFF;
            border: 2px solid #32CD32;
            padding: 6px 12px;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .join-room-btn:hover, .leave-room-btn:hover {
            background: #32CD32;
        }
        
        .leave-room-btn {
            background: #DC143C;
            border-color: #FF6347;
        }
        
        .leave-room-btn:hover {
            background: #FF6347;
        }
        
        /* Formulário de Criação de Sala */
        .create-room-form {
            padding: 20px;
            max-width: 400px;
            margin: 0 auto;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin-bottom: 5px;
        }
        
        .form-group input, .form-group select {
            width: 100%;
            padding: 8px;
            background: #000;
            color: #FFF;
            border: 2px solid #654321;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 11px;
        }
        
        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #FFD700;
        }
        
        .form-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }
        
        .create-room-confirm-btn {
            background: #228B22;
            color: #FFF;
            border: 2px solid #32CD32;
            padding: 10px 20px;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            flex: 1;
        }
        
        .create-room-confirm-btn:hover {
            background: #32CD32;
        }
        
        .cancel-btn {
            background: #DC143C;
            color: #FFF;
            border: 2px solid #FF6347;
            padding: 10px 20px;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            flex: 1;
        }
        
        .cancel-btn:hover {
            background: #FF6347;
        }
        
        /* Lobby da Sala */
        .room-lobby-content {
            padding: 20px;
        }
        
        .mission-info {
            background: #8B4513;
            border: 2px solid #654321;
            border-radius: 0;
            padding: 15px;
            margin-bottom: 20px;
        }
        
        .mission-info h3 {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            margin-bottom: 8px;
        }
        
        .mission-info p {
            color: #FFF;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            margin-bottom: 10px;
        }
        
        .mission-details {
            display: flex;
            gap: 10px;
        }
        
        .mission-details span {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            background: #000;
            padding: 2px 6px;
            border-radius: 0;
        }
        
        .players-list h3 {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            margin-bottom: 10px;
        }
        
        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .player-card {
            background: #654321;
            border: 2px solid #8B4513;
            border-radius: 0;
            padding: 10px;
            text-align: center;
            transition: all 0.2s ease;
        }
        
        .player-card.ready {
            background: #228B22;
            border-color: #32CD32;
        }
        
        .player-card.current-player {
            border-color: #FFD700;
            background: #8B4513;
        }
        
        .player-avatar {
            width: 40px;
            height: 40px;
            background: #000;
            border: 2px solid #8B4513;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 8px;
            font-size: 16px;
        }
        
        .player-info {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        
        .player-name {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            font-weight: bold;
        }
        
        .player-level {
            color: #FFF;
            font-family: 'Courier New', monospace;
            font-size: 10px;
        }
        
        .player-status {
            color: #90EE90;
            font-family: 'Courier New', monospace;
            font-size: 9px;
        }
        
        .lobby-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
        }
        
        .ready-btn {
            background: #228B22;
            color: #FFF;
            border: 2px solid #32CD32;
            padding: 10px 20px;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .ready-btn:hover {
            background: #32CD32;
        }
        
        .ready-btn.ready {
            background: #DC143C;
            border-color: #FF6347;
        }
        
        .ready-btn.ready:hover {
            background: #FF6347;
        }
        
        .start-mission-btn {
            background: #FFD700;
            color: #000;
            border: 2px solid #FFA500;
            padding: 10px 20px;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .start-mission-btn:hover {
            background: #FFA500;
        }
        
        .start-mission-btn.disabled {
            background: #696969;
            border-color: #808080;
            cursor: not-allowed;
        }
        
        /* Sistema de Habilidades */
        .skill-points-display {
            display: flex;
            align-items: center;
            gap: 5px;
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            font-size: 14px;
        }
        
        .skill-points-icon {
            font-size: 16px;
        }
        
        .skills-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
        }
        
        .skill-tree {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .skill-tree h3 {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 20px;
            margin-bottom: 20px;
            text-align: center;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .skill-category {
            margin-bottom: 30px;
            background: #8B4513;
            border: 2px solid #654321;
            border-radius: 0;
            padding: 20px;
        }
        
        .skill-category h4 {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid #654321;
            padding-bottom: 5px;
        }
        
        .skill-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #000;
            border: 1px solid #654321;
            border-radius: 0;
            padding: 15px;
            margin-bottom: 10px;
            transition: all 0.2s ease;
        }
        
        .skill-item:hover {
            background: #1a1a1a;
            border-color: #FFD700;
        }
        
        .skill-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
            flex: 1;
        }
        
        .skill-name {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            font-weight: bold;
        }
        
        .skill-description {
            color: #FFF;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            opacity: 0.8;
        }
        
        .skill-btn {
            background: #228B22;
            color: #FFF;
            border: 2px solid #32CD32;
            padding: 8px 15px;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            min-width: 80px;
        }
        
        .skill-btn:hover:not(:disabled) {
            background: #32CD32;
            transform: translateY(-1px);
        }
        
        .skill-btn:disabled {
            background: #696969;
            border-color: #808080;
            cursor: not-allowed;
            opacity: 0.6;
        }
        
        .skill-btn.available {
            background: #FFD700;
            color: #000;
            border-color: #FFA500;
        }
        
        .skill-btn.available:hover {
            background: #FFA500;
        }
        
        /* Sistema de Abas de Missões */
        .missions-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            padding: 0 20px;
        }
        
        .mission-tab {
            background: #654321;
            color: #FFD700;
            border: 2px solid #8B4513;
            padding: 10px 20px;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .mission-tab:hover {
            background: #8B4513;
            transform: translateY(-1px);
        }
        
        .mission-tab.active {
            background: #FFD700;
            color: #000;
            border-color: #FFA500;
        }
        
        .mission-tab.active:hover {
            background: #FFA500;
        }
        
        /* Sistema de Configurações */
        .settings-content {
            flex: 1;
            overflow: hidden;
            padding: 20px;
            align-content: start;
        }
        
        .settings-section {
            background: #8B4513;
            border: 2px solid #654321;
            border-radius: 0;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .settings-section h3 {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 16px;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid #654321;
            padding-bottom: 5px;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #000;
            border: 1px solid #654321;
            border-radius: 0;
            padding: 15px;
            margin-bottom: 10px;
            transition: all 0.2s ease;
        }
        
        .setting-item:hover {
            background: #1a1a1a;
            border-color: #FFD700;
        }
        
        .setting-item label {
            color: #FFD700;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            font-weight: bold;
            flex: 1;
        }
        
        .setting-control {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .setting-control input[type="range"] {
            width: 150px;
            height: 5px;
            background: #654321;
            border-radius: 0;
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }
        
        .setting-control input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            background: #FFD700;
            border-radius: 0;
            cursor: pointer;
        }
        
        .setting-control input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #FFD700;
        }
        
        .setting-control select {
            background: #000;
            color: #FFD700;
            border: 2px solid #654321;
            border-radius: 0;
            padding: 5px 10px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }
        
        .setting-control span {
            color: #FFF;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            min-width: 50px;
            text-align: right;
        }
        
        .settings-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
        }
        
        .settings-btn {
            background: #228B22;
            color: #FFF;
            border: 2px solid #32CD32;
            padding: 12px 25px;
            border-radius: 0;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .settings-btn:hover {
            background: #32CD32;
            transform: translateY(-1px);
        }
        
        .settings-btn.reset {
            background: #8B4513;
            border-color: #A0522D;
        }
        
        .settings-btn.reset:hover {
            background: #A0522D;
        }
        
        .settings-btn.save {
            background: #FFD700;
            color: #000;
            border-color: #FFA500;
        }
        
        .settings-btn.save:hover {
            background: #FFA500;
        }

        /* Interface de Missão Ativa */
        .mission-ui {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 350px;
            background: rgba(0, 0, 0, 0.9);
            border: 2px solid #3b82f6;
            border-radius: 12px;
            padding: 20px;
            z-index: 1000;
            font-family: 'Inter', sans-serif;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .mission-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #374151;
        }

        .mission-header h3 {
            color: #3b82f6;
            font-size: 18px;
            font-weight: 600;
            margin: 0;
        }

        .close-mission-btn {
            background: none;
            border: none;
            color: #9ca3af;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .close-mission-btn:hover {
            background: #374151;
            color: #ef4444;
        }

        .mission-objectives {
            margin-bottom: 20px;
        }

        .objective-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #374151;
            transition: all 0.2s ease;
        }

        .objective-item:last-child {
            border-bottom: none;
        }

        .objective-item.completed {
            opacity: 0.7;
        }

        .objective-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 14px;
            font-weight: bold;
        }

        .objective-item:not(.completed) .objective-icon {
            color: #6b7280;
        }

        .objective-item.completed .objective-icon {
            color: #10b981;
        }

        .objective-text {
            flex: 1;
            color: #e5e7eb;
            font-size: 14px;
            line-height: 1.4;
        }

        .objective-progress {
            color: #3b82f6;
            font-size: 12px;
            font-weight: 600;
            background: rgba(59, 130, 246, 0.1);
            padding: 2px 8px;
            border-radius: 12px;
        }

        .mission-progress {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .progress-bar {
            flex: 1;
            height: 8px;
            background: #374151;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #1d4ed8);
            border-radius: 4px;
            transition: width 0.3s ease;
            position: relative;
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: shimmer 2s infinite;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .mission-progress span {
            color: #3b82f6;
            font-size: 12px;
            font-weight: 600;
            min-width: 35px;
        }

        /* Estilos para botões de missão */
        .mission-select-btn.disabled {
            background: #6b7280 !important;
            border-color: #9ca3af !important;
            cursor: not-allowed !important;
            opacity: 0.6;
        }

        .mission-select-btn.completed {
            background: #10b981 !important;
            border-color: #059669 !important;
        }

        .mission-select-btn.active {
            background: #f59e0b !important;
            border-color: #d97706 !important;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* Mission Notifications */
        .mission-notification {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            border-left: 4px solid #3b82f6;
            z-index: 10000;
            font-family: 'Inter', sans-serif;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            animation: slideInRight 0.3s ease-out;
        }

        .mission-notification.success {
            border-left-color: #10b981;
        }

        .mission-notification.warning {
            border-left-color: #f59e0b;
        }

        .mission-notification.error {
            border-left-color: #ef4444;
        }

        @keyframes slideInRight {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        /* Editor de Jogo */
        .game-editor {
            position: absolute;
            left: -350px;
            top: 0;
            width: 350px;
            height: 100%;
            background: linear-gradient(135deg, #1e1e2e 0%, #2d2d44 100%);
            border-right: 3px solid #3b82f6;
            z-index: 1000;
            overflow-y: auto;
            font-family: 'Inter', sans-serif;
            box-shadow: 4px 0 20px rgba(0, 0, 0, 0.3);
            transition: left 0.3s ease;
        }
        
        .game-editor.open {
            left: 0;
        }

        .editor-header {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            padding: 20px;
            color: white;
            text-align: center;
            border-bottom: 2px solid #1d4ed8;
        }

        .editor-header h2 {
            margin: 0;
            font-size: 20px;
            font-weight: 600;
        }

        .editor-header p {
            margin: 5px 0 0 0;
            font-size: 12px;
            opacity: 0.8;
        }

        .editor-toggle {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            background: #3b82f6;
            color: white;
            border: none;
            padding: 15px 10px;
            border-radius: 0 8px 8px 0;
            cursor: pointer;
            z-index: 1001;
            font-size: 16px;
            box-shadow: 2px 0 10px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .editor-toggle:hover {
            background: #1d4ed8;
            transform: translateY(-50%) translateX(5px);
        }

        .editor-sections {
            padding: 20px;
        }

        .editor-section {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            margin-bottom: 20px;
            overflow: hidden;
        }

        .section-header {
            background: rgba(59, 130, 246, 0.2);
            padding: 12px 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s ease;
        }

        .section-header:hover {
            background: rgba(59, 130, 246, 0.3);
        }

        .section-header h3 {
            margin: 0;
            color: #3b82f6;
            font-size: 14px;
            font-weight: 600;
        }

        .section-toggle {
            color: #3b82f6;
            font-size: 18px;
            transition: transform 0.2s ease;
        }

        .section-toggle.expanded {
            transform: rotate(180deg);
        }

        .section-content {
            padding: 15px;
            display: none;
        }

        .section-content.expanded {
            display: block;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            color: #e5e7eb;
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 5px;
        }

        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 8px 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 6px;
            color: #e5e7eb;
            font-size: 12px;
            transition: all 0.2s ease;
        }

        .form-group input:focus,
        .form-group select:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #3b82f6;
            background: rgba(255, 255, 255, 0.15);
        }

        .form-group textarea {
            resize: vertical;
            min-height: 60px;
        }

        .form-row {
            display: flex;
            gap: 10px;
        }

        .form-row .form-group {
            flex: 1;
        }

        .color-picker {
            width: 40px;
            height: 30px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .file-upload {
            position: relative;
            display: inline-block;
            width: 100%;
        }

        .file-upload input[type="file"] {
            position: absolute;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-upload-label {
            display: block;
            padding: 8px 12px;
            background: rgba(59, 130, 246, 0.2);
            border: 1px dashed #3b82f6;
            border-radius: 6px;
            color: #3b82f6;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .file-upload-label:hover {
            background: rgba(59, 130, 246, 0.3);
        }

        .btn-editor {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s ease;
            margin-right: 8px;
            margin-bottom: 8px;
        }

        .btn-editor:hover {
            background: #1d4ed8;
            transform: translateY(-1px);
        }

        .btn-editor.secondary {
            background: #6b7280;
        }

        .btn-editor.secondary:hover {
            background: #4b5563;
        }

        .btn-editor.success {
            background: #10b981;
        }

        .btn-editor.success:hover {
            background: #059669;
        }

        .btn-editor.danger {
            background: #ef4444;
        }

        .btn-editor.danger:hover {
            background: #dc2626;
        }

        .preview-image {
            width: 100%;
            height: 80px;
            object-fit: cover;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            margin-top: 8px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 6px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .stat-item label {
            font-size: 10px;
            color: #9ca3af;
            margin-bottom: 3px;
        }

        .stat-item input {
            font-size: 11px;
            padding: 4px 8px;
        }

        .editor-actions {
            padding: 15px;
            background: rgba(0, 0, 0, 0.2);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .notification {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #10b981;
            color: white;
            padding: 12px 20px;
            border-radius: 6px;
            z-index: 10000;
            font-size: 12px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.error {
            background: #ef4444;
        }

        .notification.warning {
            background: #f59e0b;
        }

        /* Ajustar layout principal quando editor estiver aberto */
        body.editor-open .main-container {
            margin-left: 350px;
        }

        body.editor-open .game-window {
            margin-left: 0;
        }
        
        /* Estilos para Sistema de Missões */
        .mission-content {
            padding: 20px;
        }
        
        .mission-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .mission-tab {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            background: linear-gradient(135deg, #374151, #4b5563);
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .mission-tab:hover {
            background: linear-gradient(135deg, #4b5563, #6b7280);
            transform: translateY(-2px);
        }
        
        .mission-tab.active {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .mission-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .mission-card {
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.9), rgba(22, 33, 62, 0.9));
            border: 2px solid #374151;
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .mission-card:hover {
            border-color: #3b82f6;
            transform: translateY(-4px);
            box-shadow: 0 8px 25px rgba(59, 130, 246, 0.2);
        }
        
        .mission-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .mission-icon {
            font-size: 2rem;
            width: 60px;
            height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border-radius: 12px;
        }
        
        .mission-info h3 {
            color: #FFD700;
            margin: 0 0 5px 0;
            font-size: 1.2rem;
        }
        
        .mission-level {
            color: #60a5fa;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        .mission-description {
            color: #94a3b8;
            margin-bottom: 15px;
            line-height: 1.5;
        }
        
        .mission-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .mission-detail {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #d1d5db;
            font-size: 0.9rem;
        }
        
        .mission-detail-icon {
            color: #3b82f6;
        }
        
        .mission-rewards {
            background: rgba(34, 197, 94, 0.1);
            border: 1px solid #22c55e;
            border-radius: 8px;
            padding: 10px;
            margin-bottom: 15px;
        }
        
        .mission-rewards h4 {
            color: #22c55e;
            margin: 0 0 8px 0;
            font-size: 0.9rem;
        }
        
        .mission-reward {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #d1d5db;
            font-size: 0.85rem;
        }
        
        .mission-actions {
            display: flex;
            gap: 10px;
        }
        
        .mission-btn {
            flex: 1;
            padding: 10px 15px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .mission-btn.primary {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
        }
        
        .mission-btn.primary:hover {
            background: linear-gradient(135deg, #1d4ed8, #1e40af);
            transform: translateY(-2px);
        }
        
        .mission-btn.secondary {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
        }
        
        .mission-btn.secondary:hover {
            background: linear-gradient(135deg, #4b5563, #374151);
        }
        
        .difficulty-easy { border-left: 4px solid #22c55e; }
        .difficulty-medium { border-left: 4px solid #f59e0b; }
        .difficulty-hard { border-left: 4px solid #ef4444; }
        .difficulty-extreme { border-left: 4px solid #8b5cf6; }
        
        
        /* Estilos para Seleção de Personagem */
        .character-selection-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 40px 20px;
            height: 100%;
            background: linear-gradient(135deg, #0f0f23, #1a1a2e);
            box-sizing: border-box;
            overflow-y: auto;
            overflow-x: hidden;
        }
        
        .selection-header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .selection-title {
            color: #FFD700;
            font-size: 2.5rem;
            font-weight: 900;
            margin: 0 0 15px 0;
            text-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
            letter-spacing: 3px;
        }
        
        .selection-subtitle {
            color: #94a3b8;
            font-size: 1.2rem;
            margin: 0;
        }
        
        .heroes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 30px;
            max-width: 1200px;
            width: 100%;
            margin-bottom: 40px;
        }
        
        .hero-card {
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.9), rgba(22, 33, 62, 0.9));
            border: 2px solid #374151;
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s ease;
            position: relative;
            overflow: hidden;
        }
        
        .hero-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
            transition: left 0.6s ease;
        }
        
        .hero-card:hover::before {
            left: 100%;
        }
        
        .hero-card:hover {
            border-color: #3b82f6;
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.3);
        }
        
        .hero-card.selected {
            border-color: #22c55e;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.1), rgba(22, 33, 62, 0.9));
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.3);
        }
        
        .hero-image {
            width: 120px;
            height: 120px;
            margin: 0 auto 20px;
            border-radius: 15px;
            overflow: hidden;
            background: linear-gradient(135deg, #374151, #4b5563);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .hero-image img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .hero-fallback {
            font-size: 3rem;
            color: #6b7280;
        }
        
        .hero-info {
            text-align: center;
        }
        
        .hero-name {
            color: #FFD700;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0 0 8px 0;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        
        .hero-title {
            color: #60a5fa;
            font-size: 1rem;
            font-weight: 500;
            margin: 0 0 20px 0;
        }
        
        .hero-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }
        
        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
        }
        
        .stat-icon {
            font-size: 1.2rem;
        }
        
        .stat-value {
            color: #d1d5db;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .hero-description {
            color: #94a3b8;
            font-size: 0.9rem;
            line-height: 1.4;
            margin: 0;
        }
        
        .selection-actions {
            display: flex;
            gap: 20px;
            align-items: center;
        }
        
        .confirm-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.5;
        }
        
        .confirm-btn:not(:disabled) {
            opacity: 1;
        }
        
        .confirm-btn:not(:disabled):hover {
            background: linear-gradient(135deg, #16a34a, #15803d);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(34, 197, 94, 0.3);
        }
        
        .back-btn {
            padding: 15px 30px;
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            background: linear-gradient(135deg, #4b5563, #374151);
            transform: translateY(-2px);
        }
        
        /* Estilos para Mapa Mundi */
        .world-map-screen {
            display: flex;
            flex-direction: column;
            height: 100%;
            background: linear-gradient(135deg, #0f0f23, #1a1a2e);
            padding: 15px;
            box-sizing: border-box;
            overflow: hidden;
        }
        
        /* Abas do Mapa Mundi */
        .map-tabs {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-bottom: 15px;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .map-tab {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.8), rgba(29, 78, 216, 0.8));
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: bold;
            font-size: 13px;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .map-tab:hover {
            background: linear-gradient(135deg, rgba(59, 130, 246, 1), rgba(29, 78, 216, 1));
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }
        
        .map-tab.active {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            color: #000;
            box-shadow: 0 4px 12px rgba(255, 215, 0, 0.4);
        }
        
        /* Conteúdo das Abas */
        .map-content {
            flex: 1;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        
        .tab-content {
            display: none;
            height: 100%;
            animation: fadeIn 0.3s ease-in-out;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Estilos para telas completas */
        .inventory-full-screen,
        .shop-full-screen,
        .missions-full-screen,
        .character-full-screen,
        .settings-full-screen {
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 15px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            overflow: hidden;
        }
        
        .inventory-header,
        .shop-header,
        .missions-header,
        .character-header,
        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.1);
        }
        
        .inventory-header h2,
        .shop-header h2,
        .missions-header h2,
        .character-header h2,
        .settings-header h2 {
            color: #FFD700;
            font-size: 1.8rem;
            margin: 0;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }
        
        .gold-display {
            display: flex;
            align-items: center;
            gap: 8px;
            background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 165, 0, 0.2));
            padding: 8px 16px;
            border-radius: 20px;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }
        
        .gold-icon {
            font-size: 1.2rem;
        }
        
        .gold-display span:last-child {
            color: #FFD700;
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .map-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding: 10px 0;
        }
        
        .map-title {
            color: #FFD700;
            font-size: 1.5rem;
            font-weight: 900;
            margin: 0;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
            letter-spacing: 2px;
        }
        
        .map-subtitle {
            color: #94a3b8;
            font-size: 1.2rem;
            margin: 0;
        }
        
        .world-map-container {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 30px;
            flex: 1;
        }
        
        .galactic-map {
            position: relative;
            background: linear-gradient(135deg, rgba(15, 15, 35, 0.8), rgba(26, 26, 46, 0.8));
            border: 2px solid #374151;
            border-radius: 20px;
            min-height: 600px;
            overflow: hidden;
        }
        
        .mission-location {
            position: absolute;
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.9), rgba(22, 33, 62, 0.9));
            border: 2px solid #374151;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s ease;
            min-width: 120px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
        }
        
        .mission-location:hover {
            border-color: #3b82f6;
            transform: translateY(-8px) scale(1.05);
            box-shadow: 0 20px 40px rgba(59, 130, 246, 0.3);
        }
        
        .location-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .location-name {
            color: #FFD700;
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 8px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        
        .location-level {
            color: #60a5fa;
            font-size: 0.9rem;
            font-weight: 500;
            margin-bottom: 5px;
        }
        
        .mission-count {
            color: #22c55e;
            font-size: 0.8rem;
            font-weight: 600;
            background: rgba(34, 197, 94, 0.1);
            padding: 4px 8px;
            border-radius: 8px;
            border: 1px solid #22c55e;
        }
        
        .map-info-panel {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .hero-info-card, .stats-card, .quick-actions {
            background: linear-gradient(135deg, rgba(26, 26, 46, 0.9), rgba(22, 33, 62, 0.9));
            border: 2px solid #374151;
            border-radius: 15px;
            padding: 20px;
        }
        
        .hero-info-card h3, .stats-card h3, .quick-actions h3 {
            color: #FFD700;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 0 0 15px 0;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }
        
        .hero-info-display {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .hero-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }
        
        .hero-details {
            flex: 1;
        }
        
        .hero-name {
            color: #FFD700;
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .hero-level {
            color: #60a5fa;
            font-size: 0.9rem;
        }
        
        .stats-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .stat-icon {
            font-size: 1.1rem;
            width: 20px;
        }
        
        .stat-label {
            color: #94a3b8;
            font-size: 0.9rem;
            flex: 1;
        }
        
        .stat-value {
            color: #d1d5db;
            font-weight: 600;
            font-size: 0.9rem;
        }
        
        .quick-actions {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .action-btn {
            padding: 12px 15px;
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }
        
        .action-btn:hover {
            background: linear-gradient(135deg, #4b5563, #374151);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>

    <!-- Editor de Jogo -->
    <button class="editor-toggle" id="editorToggle" title="Abrir Editor de Jogo">
        ⚙️
    </button>

    <div class="game-editor" id="gameEditor">
        <div class="editor-header">
            <h2>Editor de Jogo</h2>
            <p>Nova Remains - Edição Intuitiva</p>
        </div>

        <div class="editor-sections">
            <!-- Seção de Personagens -->
            <div class="editor-section">
                <div class="section-header" onclick="toggleSection('characters')">
                    <h3>👥 Personagens</h3>
                    <span class="section-toggle">▼</span>
                </div>
                <div class="section-content" id="characters">
                    <div class="form-group">
                        <label>Selecionar Personagem</label>
                        <select id="characterSelect">
                            <option value="juno">Juno - Caçadora de Estrelas</option>
                            <option value="atlas">Atlas - Guardião Cósmico</option>
                            <option value="vega">Vega - Exploradora Espacial</option>
                            <option value="kai">Kai - Guerreiro Estelar</option>
                        </select>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-item">
                            <label>Vida</label>
                            <input type="number" id="charHealth" value="100" min="1" max="1000">
                        </div>
                        <div class="stat-item">
                            <label>Dano</label>
                            <input type="number" id="charDamage" value="25" min="1" max="200">
                        </div>
                        <div class="stat-item">
                            <label>Velocidade</label>
                            <input type="number" id="charSpeed" value="5" min="1" max="20">
                        </div>
                        <div class="stat-item">
                            <label>Defesa</label>
                            <input type="number" id="charDefense" value="10" min="0" max="100">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Descrição do Personagem</label>
                        <textarea id="charDescription" placeholder="Descreva o personagem...">Caçador de estrelas experiente com habilidades únicas.</textarea>
                    </div>

                    <div class="form-group">
                        <label>Habilidade Especial</label>
                        <input type="text" id="charSpecial" placeholder="Nome da habilidade" value="Ataque Estelar">
                    </div>

                    <button class="btn-editor success" onclick="saveCharacter()">💾 Salvar Personagem</button>
                </div>
            </div>

            <!-- Seção de Assets -->
            <div class="editor-section">
                <div class="section-header" onclick="toggleSection('assets')">
                    <h3>🎨 Assets & Imagens</h3>
                    <span class="section-toggle">▼</span>
                </div>
                <div class="section-content" id="assets">
                    <div class="form-group">
                        <label>Tipo de Asset</label>
                        <select id="assetType">
                            <option value="character">Personagem</option>
                            <option value="enemy">Inimigo</option>
                            <option value="item">Item</option>
                            <option value="background">Fundo</option>
                            <option value="effect">Efeito</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Upload de Imagem</label>
                        <div class="file-upload">
                            <input type="file" id="assetUpload" accept="image/*" onchange="previewAsset(this)">
                            <label for="assetUpload" class="file-upload-label">
                                📁 Clique para selecionar imagem
                            </label>
                        </div>
                        <img id="assetPreview" class="preview-image" style="display: none;">
                    </div>

                    <div class="form-group">
                        <label>Nome do Asset</label>
                        <input type="text" id="assetName" placeholder="Nome único do asset">
                    </div>

                    <div class="form-group">
                        <label>Dimensões (Largura x Altura)</label>
                        <div class="form-row">
                            <input type="number" id="assetWidth" placeholder="Largura" value="64">
                            <input type="number" id="assetHeight" placeholder="Altura" value="64">
                        </div>
                    </div>

                    <button class="btn-editor" onclick="uploadAsset()">📤 Upload Asset</button>
                    <button class="btn-editor secondary" onclick="previewAllAssets()">👁️ Visualizar Assets</button>
                </div>
            </div>

            <!-- Seção de Economia -->
            <div class="editor-section">
                <div class="section-header" onclick="toggleSection('economy')">
                    <h3>💰 Economia & Preços</h3>
                    <span class="section-toggle">▼</span>
                </div>
                <div class="section-content" id="economy">
                    <div class="form-group">
                        <label>Moeda Inicial do Jogador</label>
                        <input type="number" id="startingGold" value="1000" min="0" max="100000">
                    </div>

                    <div class="form-group">
                        <label>Taxa de Ganho de Ouro (por inimigo)</label>
                        <input type="number" id="goldPerEnemy" value="10" min="1" max="1000">
                    </div>

                    <h4 style="color: #3b82f6; margin: 15px 0 10px 0;">Preços de Itens</h4>
                    
                    <div class="stats-grid">
                        <div class="stat-item">
                            <label>Poção de Vida</label>
                            <input type="number" id="priceHealthPotion" value="50" min="1" max="1000">
                        </div>
                        <div class="stat-item">
                            <label>Poção de Mana</label>
                            <input type="number" id="priceManaPotion" value="75" min="1" max="1000">
                        </div>
                        <div class="stat-item">
                            <label>Arma Básica</label>
                            <input type="number" id="priceBasicWeapon" value="200" min="1" max="5000">
                        </div>
                        <div class="stat-item">
                            <label>Armadura Básica</label>
                            <input type="number" id="priceBasicArmor" value="300" min="1" max="5000">
                        </div>
                    </div>

                    <button class="btn-editor success" onclick="saveEconomy()">💾 Salvar Economia</button>
                </div>
            </div>

            <!-- Seção de Inimigos -->
            <div class="editor-section">
                <div class="section-header" onclick="toggleSection('enemies')">
                    <h3>👾 Inimigos</h3>
                    <span class="section-toggle">▼</span>
                </div>
                <div class="section-content" id="enemies">
                    <div class="form-group">
                        <label>Selecionar Inimigo</label>
                        <select id="enemySelect">
                            <option value="goblin">Goblin</option>
                            <option value="orc">Orc</option>
                            <option value="dragon">Dragão</option>
                            <option value="boss">Chefe</option>
                        </select>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-item">
                            <label>Vida</label>
                            <input type="number" id="enemyHealth" value="50" min="1" max="1000">
                        </div>
                        <div class="stat-item">
                            <label>Dano</label>
                            <input type="number" id="enemyDamage" value="15" min="1" max="200">
                        </div>
                        <div class="stat-item">
                            <label>Velocidade</label>
                            <input type="number" id="enemySpeed" value="2" min="1" max="20">
                        </div>
                        <div class="stat-item">
                            <label>Recompensa (Ouro)</label>
                            <input type="number" id="enemyReward" value="25" min="0" max="1000">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Descrição do Inimigo</label>
                        <textarea id="enemyDescription" placeholder="Descreva o inimigo...">Inimigo básico com ataques simples.</textarea>
                    </div>

                    <button class="btn-editor success" onclick="saveEnemy()">💾 Salvar Inimigo</button>
                </div>
            </div>

            <!-- Seção de Missões -->
            <div class="editor-section">
                <div class="section-header" onclick="toggleSection('missions')">
                    <h3>🎯 Missões</h3>
                    <span class="section-toggle">▼</span>
                </div>
                <div class="section-content" id="missions">
                    <div class="form-group">
                        <label>Selecionar Missão</label>
                        <select id="missionSelect">
                            <option value="tutorial">Tutorial Inicial</option>
                            <option value="first_quest">Primeira Missão</option>
                            <option value="custom">Nova Missão</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Nome da Missão</label>
                        <input type="text" id="missionName" value="Tutorial Inicial">
                    </div>

                    <div class="form-group">
                        <label>Descrição da Missão</label>
                        <textarea id="missionDescription" placeholder="Descreva a missão...">Aprenda os controles básicos do jogo.</textarea>
                    </div>

                    <div class="form-group">
                        <label>Dificuldade</label>
                        <select id="missionDifficulty">
                            <option value="Fácil">Fácil</option>
                            <option value="Médio">Médio</option>
                            <option value="Difícil">Difícil</option>
                            <option value="Extremo">Extremo</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Recompensas</label>
                        <div class="form-row">
                            <input type="number" id="missionGold" placeholder="Ouro" value="100">
                            <input type="number" id="missionExp" placeholder="EXP" value="50">
                        </div>
                    </div>

                    <button class="btn-editor success" onclick="saveMission()">💾 Salvar Missão</button>
                </div>
            </div>

            <!-- Seção de Configurações Gerais -->
            <div class="editor-section">
                <div class="section-header" onclick="toggleSection('settings')">
                    <h3>⚙️ Configurações Gerais</h3>
                    <span class="section-toggle">▼</span>
                </div>
                <div class="section-content" id="settings">
                    <div class="form-group">
                        <label>Nome do Jogo</label>
                        <input type="text" id="gameName" value="Nova Remains">
                    </div>

                    <div class="form-group">
                        <label>Versão</label>
                        <input type="text" id="gameVersion" value="1.0.0">
                    </div>

                    <div class="form-group">
                        <label>Cor Principal</label>
                        <input type="color" id="primaryColor" value="#3b82f6" class="color-picker">
                    </div>

                    <div class="form-group">
                        <label>Cor Secundária</label>
                        <input type="color" id="secondaryColor" value="#1d4ed8" class="color-picker">
                    </div>

                    <div class="form-group">
                        <label>FPS do Jogo</label>
                        <input type="number" id="gameFPS" value="60" min="30" max="120">
                    </div>

                    <div class="form-group">
                        <label>Dificuldade Global</label>
                        <select id="globalDifficulty">
                            <option value="easy">Fácil</option>
                            <option value="normal" selected>Normal</option>
                            <option value="hard">Difícil</option>
                        </select>
                    </div>

                    <button class="btn-editor success" onclick="saveSettings()">💾 Salvar Configurações</button>
                </div>
            </div>
        </div>

        <div class="editor-actions">
            <button class="btn-editor success" onclick="saveAll()">💾 Salvar Tudo</button>
            <button class="btn-editor secondary" onclick="loadConfig()">📁 Carregar Config</button>
            <button class="btn-editor danger" onclick="resetAll()">🔄 Resetar Tudo</button>
            <button class="btn-editor" onclick="exportConfig()">📤 Exportar</button>
        </div>
    </div>

    <!-- Fundo de Estrelas Global -->
    <div class="global-starfield">
        <canvas class="global-starfield-canvas" id="globalStarfieldCanvas"></canvas>
    </div>

    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-spinner"></div>
        <div class="loading-text">Carregando Nova Remains...</div>
    </div>
    
    <!-- FPS Counter -->
    <div id="fpsCounter" class="fps-counter" style="display: none;">FPS: 60</div>
    
    <div class="main-container">
        <!-- Janela Centralizada do Jogo -->
        <div class="game-window">
            <!-- Menu Principal -->
            <div id="mainMenu" style="display: block;" role="main" aria-label="Menu Principal do Jogo">
                <div class="menu-header">
                    <h1 id="gameTitle">Nova Remains</h1>
                    <p class="menu-subtitle">Caçadores de Estrelas em Busca dos Nova Remains</p>
                    <div class="version-info">v1.0.0 - Beta</div>
                </div>
                
                <div class="menu-content">
                    <div class="menu-section">
                        <button id="startBtn" class="menu-btn primary">🎮 Iniciar Jogo</button>
                        <button id="missionsBtn" class="menu-btn">🎯 Missões</button>
                        <button id="shopBtn" class="menu-btn">🏪 Loja</button>
                        <button id="inventoryBtn" class="menu-btn">🎒 Inventário</button>
                        <button id="settingsBtn" class="menu-btn">⚙️ Configurações</button>
                        <button id="aboutBtn" class="menu-btn">ℹ️ Sobre</button>
                    </div>
                </div>
            </div>


            <!-- Tela de Seleção de Personagem -->
            <div id="characterSelectionScreen" class="character-selection-screen" style="display: none;">
                <div class="selection-header">
                    <h1 class="selection-title">SELECIONE SEU HERÓI</h1>
                    <p class="selection-subtitle">Escolha seu caçador de estrelas para começar a aventura</p>
                        </div>
                
                <div class="heroes-grid">
                    <!-- Juno -->
                    <div class="hero-card" onclick="selectHero(this, 'juno')" data-hero="juno">
                        <div class="hero-image">
                            <img src="assets/images/characters/heroes/juno/juno.png" alt="Juno" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <div class="hero-fallback" style="display: none;">⚔️</div>
                        </div>
                        <div class="hero-info">
                            <h3 class="hero-name">JUNO</h3>
                            <p class="hero-title">Guerreiro Estelar</p>
                            <div class="hero-stats">
                                <div class="stat">
                                    <span class="stat-icon">❤️</span>
                                    <span class="stat-value">100</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-icon">⚔️</span>
                                    <span class="stat-value">25</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-icon">🛡️</span>
                                    <span class="stat-value">15</span>
                                </div>
                            </div>
                            <p class="hero-description">Um guerreiro equilibrado com habilidades de combate versáteis</p>
                        </div>
                    </div>

                    <!-- Atlas -->
                    <div class="hero-card" onclick="selectHero(this, 'atlas')" data-hero="atlas">
                        <div class="hero-image">
                            <img src="assets/images/characters/heroes/atlas/atlas.png" alt="Atlas" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <div class="hero-fallback" style="display: none;">🛡️</div>
                        </div>
                        <div class="hero-info">
                            <h3 class="hero-name">ATLAS</h3>
                            <p class="hero-title">Guardião Cósmico</p>
                            <div class="hero-stats">
                                <div class="stat">
                                    <span class="stat-icon">❤️</span>
                                    <span class="stat-value">120</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-icon">⚔️</span>
                                    <span class="stat-value">20</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-icon">🛡️</span>
                                    <span class="stat-value">20</span>
                                </div>
                            </div>
                            <p class="hero-description">Um defensor poderoso com alta resistência e proteção</p>
                        </div>
                    </div>

                    <!-- Vega -->
                    <div class="hero-card" onclick="selectHero(this, 'vega')" data-hero="vega">
                        <div class="hero-image">
                            <img src="assets/images/characters/heroes/vega/vega.png" alt="Vega" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <div class="hero-fallback" style="display: none;">🏹</div>
                        </div>
                        <div class="hero-info">
                            <h3 class="hero-name">VEGA</h3>
                            <p class="hero-title">Exploradora Espacial</p>
                            <div class="hero-stats">
                                <div class="stat">
                                    <span class="stat-icon">❤️</span>
                                    <span class="stat-value">80</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-icon">⚔️</span>
                                    <span class="stat-value">30</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-icon">🛡️</span>
                                    <span class="stat-value">10</span>
                                </div>
                            </div>
                            <p class="hero-description">Uma atiradora ágil com alta mobilidade e precisão</p>
                        </div>
                    </div>

                    <!-- Kai -->
                    <div class="hero-card" onclick="selectHero(this, 'kai')" data-hero="kai">
                        <div class="hero-image">
                            <img src="assets/images/characters/heroes/juno/kai.png" alt="Kai" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                            <div class="hero-fallback" style="display: none;">⚡</div>
                        </div>
                        <div class="hero-info">
                            <h3 class="hero-name">KAI</h3>
                            <p class="hero-title">Guerreiro Estelar</p>
                            <div class="hero-stats">
                                <div class="stat">
                                    <span class="stat-icon">❤️</span>
                                    <span class="stat-value">110</span>
                    </div>
                                <div class="stat">
                                    <span class="stat-icon">⚔️</span>
                                    <span class="stat-value">28</span>
                                </div>
                                <div class="stat">
                                    <span class="stat-icon">🛡️</span>
                                    <span class="stat-value">12</span>
                                </div>
                            </div>
                            <p class="hero-description">Um guerreiro equilibrado com habilidades especiais únicas</p>
                        </div>
                    </div>
                </div>
                
                <div class="selection-actions">
                    <button id="confirmHeroBtn" class="confirm-btn" onclick="confirmHeroSelection()" disabled>
                        🚀 CONFIRMAR HERÓI
                    </button>
                    <button class="back-btn" onclick="goBackToMainMenu()">
                        ← VOLTAR
                    </button>
                </div>
            </div>
            
            <!-- Container do Jogo com Fundo de Estrelas -->
            <div id="gameContainer" class="game-container" style="display: none; position: relative; width: 100%; height: 100%; margin: 0 auto; border-radius: 12px; overflow: hidden; box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);">
                <!-- Fundo de Estrelas -->
                <div class="starfield-container">
                    <canvas class="starfield-canvas" id="starfieldCanvas"></canvas>
                </div>
                
                <!-- Aurora Background -->
                <div class="aurora-bg"></div>
                
                <!-- Canvas do Jogo -->
                <canvas id="gameCanvas" 
                        width="1200" 
                        height="600" 
                        style="position: relative; z-index: 3; width: 100%; height: 100%; object-fit: contain;"
                        tabindex="0"
                        aria-label="Jogo Nova Remains">
                </canvas>
            </div>
            
            <!-- UI do Jogo -->
            <div id="ui" style="display: none;">
                <div id="healthBar">
                    <div id="healthFill"></div>
                    <span id="healthText">100/100</span>
                </div>
                <div id="manaBar">
                    <div id="manaFill"></div>
                    <span id="manaText">50/50</span>
                </div>
                <div class="ui-info">
                    <div class="level-display">Lv. <span id="levelValue">1</span></div>
                    <div class="gold-display">💰 <span id="goldValue">1000</span></div>
                    <div class="exp-display">EXP: <span id="expValue">0/100</span></div>
                </div>
            </div>
            
            
            <!-- Mapa Mundi com Missões -->
            <div id="worldMap" class="world-map-screen" style="display: none;">
                <!-- Header com Navegação -->
                <div class="map-header">
                    <button id="backFromWorldMapBtn" class="back-btn" onclick="goBackToCharacterSelection()">← Voltar</button>
                    <h1 class="map-title">🗺️ MAPA MUNDI</h1>
                </div>
                
                <!-- Abas Superiores -->
                <div class="map-tabs">
                    <button class="map-tab active" data-tab="map" onclick="switchMapTab('map')">
                        🗺️ Mapa
                    </button>
                    <button class="map-tab" data-tab="inventory" onclick="switchMapTab('inventory')">
                        🎒 Inventário
                    </button>
                    <button class="map-tab" data-tab="shop" onclick="switchMapTab('shop')">
                        🏪 Loja
                    </button>
                    <button class="map-tab" data-tab="missions" onclick="switchMapTab('missions')">
                        🎯 Missões
                    </button>
                    <button class="map-tab" data-tab="character" onclick="switchMapTab('character')">
                        ⚔️ Herói
                    </button>
                    <button class="map-tab" data-tab="settings" onclick="switchMapTab('settings')">
                        ⚙️ Configurações
                    </button>
                </div>
                
                <!-- Conteúdo das Abas -->
                <div class="map-content">
                    <!-- Aba do Mapa -->
                    <div id="mapTab" class="tab-content active">
                        <div class="world-map-container">
                            <div class="galactic-map">
                                <!-- Vila -->
                                <div class="map-location mission-location" data-location="village" onclick="openLocationMissions('village')" style="top: 60%; left: 20%;">
                                    <div class="location-icon">🏘️</div>
                                    <div class="location-name">VILA</div>
                                    <div class="location-level">Nível 1-2</div>
                                    <div class="mission-count">2 Missões</div>
                                </div>
                                
                                <!-- Floresta -->
                                <div class="map-location mission-location" data-location="forest" onclick="openLocationMissions('forest')" style="top: 40%; left: 35%;">
                                    <div class="location-icon">🌲</div>
                                    <div class="location-name">FLORESTA</div>
                                    <div class="location-level">Nível 3-4</div>
                                    <div class="mission-count">2 Missões</div>
                                </div>
                                
                                <!-- Caverna -->
                                <div class="map-location mission-location" data-location="cave" onclick="openLocationMissions('cave')" style="top: 70%; left: 45%;">
                                    <div class="location-icon">⛰️</div>
                                    <div class="location-name">CAVERNA</div>
                                    <div class="location-level">Nível 5-6</div>
                                    <div class="mission-count">2 Missões</div>
                                </div>
                                
                                <!-- Torre -->
                                <div class="map-location mission-location" data-location="tower" onclick="openLocationMissions('tower')" style="top: 30%; left: 60%;">
                                    <div class="location-icon">🏰</div>
                                    <div class="location-name">TORRE</div>
                                    <div class="location-level">Nível 7-8</div>
                                    <div class="mission-count">2 Missões</div>
                                </div>
                                
                                <!-- Masmorra -->
                                <div class="map-location mission-location" data-location="dungeon" onclick="openLocationMissions('dungeon')" style="top: 50%; left: 75%;">
                                    <div class="location-icon">🗡️</div>
                                    <div class="location-name">MASMORRA</div>
                                    <div class="location-level">Nível 10-15</div>
                                    <div class="mission-count">2 Missões</div>
                                </div>
                            </div>
                            
                            <!-- Painel de Informações do Herói -->
                            <div class="map-info-panel">
                                <div class="hero-info-card">
                                    <h3>👤 Herói Selecionado</h3>
                                    <div id="selectedHeroInfo" class="hero-info-display">
                                        <div class="hero-avatar">⚔️</div>
                                        <div class="hero-details">
                                            <div class="hero-name">JUNO</div>
                                            <div class="hero-level">Nível 1</div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="stats-card">
                                    <h3>📊 Estatísticas</h3>
                                    <div class="stats-list">
                                        <div class="stat-item">
                                            <span class="stat-icon">❤️</span>
                                            <span class="stat-label">Vida:</span>
                                            <span class="stat-value">100/100</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-icon">⚔️</span>
                                            <span class="stat-label">Ataque:</span>
                                            <span class="stat-value">25</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-icon">🛡️</span>
                                            <span class="stat-label">Defesa:</span>
                                            <span class="stat-value">15</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-icon">💰</span>
                                            <span class="stat-label">Ouro:</span>
                                            <span class="stat-value">500</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Aba do Inventário -->
                    <div id="inventoryTab" class="tab-content">
                        <div class="inventory-full-screen">
                            <div class="inventory-header">
                                <div class="header-left">
                                    <button class="back-btn-small" onclick="switchMapTab('map')">← Voltar</button>
                                    <h2>🎒 Inventário Completo</h2>
                                </div>
                                <div class="gold-display">
                                    <span class="gold-icon">💰</span>
                                    <span id="playerGold">1000</span>
                                </div>
                            </div>
                            <div class="inventory-modern">
                                <div class="inventory-main">
                                    <div class="inventory-grid" id="inventoryGrid">
                                        <!-- Slots serão gerados dinamicamente -->
                                    </div>
                                    <div class="inventory-info">
                                        <h3>Equipamentos</h3>
                                        <div class="equipped-items">
                                            <div class="equipped-slot">
                                                <label>Arma:</label>
                                                <div class="equipped-item">⚔️ Espada Básica</div>
                                            </div>
                                            <div class="equipped-slot">
                                                <label>Armadura:</label>
                                                <div class="equipped-item">🛡️ Armadura de Couro</div>
                                            </div>
                                            <div class="equipped-slot">
                                                <label>Acessório:</label>
                                                <div class="equipped-item">💍 Anel de Poder</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Aba da Loja -->
                    <div id="shopTab" class="tab-content">
                        <div class="shop-full-screen">
                            <div class="shop-header">
                                <div class="header-left">
                                    <button class="back-btn-small" onclick="switchMapTab('map')">← Voltar</button>
                                    <h2>🏪 Loja Galáctica</h2>
                                </div>
                                <div class="gold-display">
                                    <span class="gold-icon">💰</span>
                                    <span id="shopPlayerGold">1000</span>
                                </div>
                            </div>
                            <div class="shop-modern">
                                <div class="shop-categories">
                                    <button class="category-btn active" data-category="all">Todos</button>
                                    <button class="category-btn" data-category="weapon">Armas</button>
                                    <button class="category-btn" data-category="armor">Armaduras</button>
                                    <button class="category-btn" data-category="consumable">Poções</button>
                                    <button class="category-btn" data-category="gem">Gemas</button>
                                </div>
                                <div class="shop-main">
                                    <div class="shop-items" id="shopItems">
                                        <!-- Itens serão gerados dinamicamente -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Aba das Missões -->
                    <div id="missionsTab" class="tab-content">
                        <div class="missions-full-screen">
                            <div class="missions-header">
                                <div class="header-left">
                                    <button class="back-btn-small" onclick="switchMapTab('map')">← Voltar</button>
                                    <h2>🎯 Missões Disponíveis</h2>
                                </div>
                                <div class="player-info">
                                    <span class="player-level">Lv.1</span>
                                    <span class="player-name">Player</span>
                                    <span class="player-gold">💰 1000</span>
                                </div>
                            </div>
                            <div class="missions-modern">
                                <div class="missions-tabs">
                                    <button class="mission-tab active" data-tab="story">📖 História</button>
                                    <button class="mission-tab" data-tab="daily">📅 Diárias</button>
                                    <button class="mission-tab" data-tab="weekly">📆 Semanais</button>
                                    <button class="mission-tab" data-tab="events">🎉 Eventos</button>
                                </div>
                                <div class="missions-map">
                                    <div class="location-section">
                                        <h3>🌌 Santuário das Estrelas</h3>
                                        <div class="mission-list">
                                            <!-- Missões serão carregadas dinamicamente -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Aba do Herói -->
                    <div id="characterTab" class="tab-content">
                        <div class="character-full-screen">
                            <div class="character-header">
                                <h2>⚔️ Informações do Herói</h2>
                            </div>
                            <div class="character-details">
                                <div class="character-preview">
                                    <div class="character-avatar">⚔️</div>
                                    <h3>JUNO</h3>
                                    <p class="character-class">Guerreiro Estelar</p>
                                </div>
                                <div class="character-stats">
                                    <h3>📊 Estatísticas</h3>
                                    <div class="stats-grid">
                                        <div class="stat-item">
                                            <span class="stat-icon">❤️</span>
                                            <span class="stat-label">Vida:</span>
                                            <span class="stat-value">100/100</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-icon">⚔️</span>
                                            <span class="stat-label">Ataque:</span>
                                            <span class="stat-value">25</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-icon">🛡️</span>
                                            <span class="stat-label">Defesa:</span>
                                            <span class="stat-value">15</span>
                                        </div>
                                        <div class="stat-item">
                                            <span class="stat-icon">⚡</span>
                                            <span class="stat-label">Velocidade:</span>
                                            <span class="stat-value">12</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Aba de Configurações -->
                    <div id="settingsTab" class="tab-content">
                        <div class="settings-full-screen">
                            <div class="settings-header">
                                <h2>⚙️ Configurações do Jogo</h2>
                            </div>
                            <div class="settings-content">
                                <div class="settings-section">
                                    <h3>🎮 Controles</h3>
                                    <div class="setting-item">
                                        <label>Volume Geral:</label>
                                        <input type="range" min="0" max="100" value="50">
                                    </div>
                                    <div class="setting-item">
                                        <label>Volume de Efeitos:</label>
                                        <input type="range" min="0" max="100" value="70">
                                    </div>
                                    <div class="setting-item">
                                        <label>Volume de Música:</label>
                                        <input type="range" min="0" max="100" value="60">
                                    </div>
                                </div>
                                <div class="settings-section">
                                    <h3>🖥️ Gráficos</h3>
                                    <div class="setting-item">
                                        <label>Qualidade:</label>
                                        <select>
                                            <option>Alta</option>
                                            <option>Média</option>
                                            <option>Baixa</option>
                                        </select>
                                    </div>
                                    <div class="setting-item">
                                        <label>Resolução:</label>
                                        <select>
                                            <option>1920x1080</option>
                                            <option>1366x768</option>
                                            <option>1280x720</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
            <!-- Submenu de Personagens -->
            <div id="characterMenu" class="submenu" style="display: none;">
            <div class="submenu-header">
                <button id="backFromCharacterBtn" class="back-btn">← Voltar</button>
                <h2>⚔️ Seleção de Herói</h2>
            </div>
            <div class="submenu-content">
                <div class="character-grid">
                <div class="character-card hero-card-3d">
                    <div class="character-preview hero-preview-3d" id="character1" style="background: linear-gradient(135deg, #FFD700, #FFA500, #FF8C00);">
                        <div class="character-sprite-fallback" style="display: flex; align-items: center; justify-content: center; font-size: 48px; width: 100%; height: 100%;">⚔️</div>
                    </div>
                    <h3 style="color: #FFD700; text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);">Juno</h3>
                    <p class="character-description" style="color: #FFA500;">Nobre cavaleira cuja armadura reflete a luz das estrelas. Protetora do grupo com coragem inabalável.</p>
                    <div class="character-stats" style="background: linear-gradient(135deg, rgba(26, 26, 46, 0.8), rgba(22, 33, 62, 0.8)); padding: 10px; border-radius: 8px; margin: 10px 0;">
                        <div class="stat" style="color: #FF6B6B;">❤️ Vida: 120</div>
                        <div class="stat" style="color: #4ECDC4;">⚡ Mana: 60</div>
                        <div class="stat" style="color: #45B7D1;">⚔️ Dano: 30</div>
                        <div class="stat" style="color: #96CEB4;">🏃 Velocidade: 4</div>
                    </div>
                    <div class="character-skills" style="margin: 10px 0;">
                        <span class="skill-tag" style="background: linear-gradient(135deg, #FF6B6B, #FF8E8E); color: white; padding: 4px 8px; border-radius: 4px; font-size: 10px; margin: 2px; display: inline-block;">Corte Devastador</span>
                        <span class="skill-tag" style="background: linear-gradient(135deg, #4ECDC4, #6EDDD6); color: white; padding: 4px 8px; border-radius: 4px; font-size: 10px; margin: 2px; display: inline-block;">Escudo Protetor</span>
                    </div>
                    <button class="select-character btn-3d" data-character="juno">Selecionar</button>
                </div>
                <div class="character-card hero-card-3d">
                    <div class="character-preview hero-preview-3d" id="character2" style="background: linear-gradient(135deg, #87CEEB, #4682B4, #1E90FF);">
                        <div class="character-sprite-fallback" style="display: flex; align-items: center; justify-content: center; font-size: 48px; width: 100%; height: 100%;">🏹</div>
                    </div>
                    <h3 style="color: #FFD700; text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);">Atlas</h3>
                    <p class="character-description" style="color: #87CEEB;">Arqueiro cuja mira é tão precisa quanto a trajetória de um planeta. Flechas que rasgam o céu.</p>
                    <div class="character-stats" style="background: linear-gradient(135deg, rgba(26, 26, 46, 0.8), rgba(22, 33, 62, 0.8)); padding: 10px; border-radius: 8px; margin: 10px 0;">
                        <div class="stat" style="color: #FF6B6B;">❤️ Vida: 80</div>
                        <div class="stat" style="color: #4ECDC4;">⚡ Mana: 100</div>
                        <div class="stat" style="color: #45B7D1;">⚔️ Dano: 25</div>
                        <div class="stat" style="color: #96CEB4;">🏃 Velocidade: 8</div>
                    </div>
                    <div class="character-skills" style="margin: 10px 0;">
                        <span class="skill-tag" style="background: linear-gradient(135deg, #FF6B6B, #FF8E8E); color: white; padding: 4px 8px; border-radius: 4px; font-size: 10px; margin: 2px; display: inline-block;">Flecha Perfurante</span>
                        <span class="skill-tag" style="background: linear-gradient(135deg, #4ECDC4, #6EDDD6); color: white; padding: 4px 8px; border-radius: 4px; font-size: 10px; margin: 2px; display: inline-block;">Chuva de Flechas</span>
                    </div>
                    <button class="select-character btn-3d" data-character="atlas">Selecionar</button>
                </div>
                <div class="character-card hero-card-3d">
                    <div class="character-preview hero-preview-3d" id="character3" style="background: linear-gradient(135deg, #9370DB, #8A2BE2, #4B0082);">
                        <div class="character-sprite-fallback" style="display: flex; align-items: center; justify-content: center; font-size: 48px; width: 100%; height: 100%;">🔮</div>
                    </div>
                    <h3 style="color: #FFD700; text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);">Vega</h3>
                    <p class="character-description" style="color: #9370DB;">Mago sábio e enigmático que manipula a magia cósmica para destruir inimigos e desvendar segredos.</p>
                    <div class="character-stats" style="background: linear-gradient(135deg, rgba(26, 26, 46, 0.8), rgba(22, 33, 62, 0.8)); padding: 10px; border-radius: 8px; margin: 10px 0;">
                        <div class="stat" style="color: #FF6B6B;">❤️ Vida: 70</div>
                        <div class="stat" style="color: #4ECDC4;">⚡ Mana: 150</div>
                        <div class="stat" style="color: #45B7D1;">⚔️ Dano: 35</div>
                        <div class="stat" style="color: #96CEB4;">🏃 Velocidade: 3</div>
                    </div>
                    <div class="character-skills" style="margin: 10px 0;">
                        <span class="skill-tag" style="background: linear-gradient(135deg, #9370DB, #8A2BE2); color: white; padding: 4px 8px; border-radius: 4px; font-size: 10px; margin: 2px; display: inline-block;">Bola de Fogo</span>
                        <span class="skill-tag" style="background: linear-gradient(135deg, #4ECDC4, #6EDDD6); color: white; padding: 4px 8px; border-radius: 4px; font-size: 10px; margin: 2px; display: inline-block;">Escudo Mágico</span>
                    </div>
                    <button class="select-character btn-3d" data-character="vega">Selecionar</button>
                </div>
                <div class="character-card hero-card-3d">
                    <div class="character-preview hero-preview-3d" id="character4" style="background: linear-gradient(135deg, #2F4F4F, #708090, #A9A9A9);">
                        <div class="character-sprite-fallback" style="display: flex; align-items: center; justify-content: center; font-size: 48px; width: 100%; height: 100%;">🥷</div>
                    </div>
                    <h3 style="color: #FFD700; text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);">Kai</h3>
                    <p class="character-description" style="color: #708090;">Ágil ninja caçador furtivo que se move como uma sombra, atacando com a velocidade de um cometa.</p>
                    <div class="character-stats" style="background: linear-gradient(135deg, rgba(26, 26, 46, 0.8), rgba(22, 33, 62, 0.8)); padding: 10px; border-radius: 8px; margin: 10px 0;">
                        <div class="stat" style="color: #FF6B6B;">❤️ Vida: 90</div>
                        <div class="stat" style="color: #4ECDC4;">⚡ Mana: 80</div>
                        <div class="stat" style="color: #45B7D1;">⚔️ Dano: 28</div>
                        <div class="stat" style="color: #96CEB4;">🏃 Velocidade: 9</div>
                    </div>
                    <div class="character-skills" style="margin: 10px 0;">
                        <span class="skill-tag" style="background: linear-gradient(135deg, #2F4F4F, #708090); color: white; padding: 4px 8px; border-radius: 4px; font-size: 10px; margin: 2px; display: inline-block;">Ataque Furtivo</span>
                        <span class="skill-tag" style="background: linear-gradient(135deg, #4ECDC4, #6EDDD6); color: white; padding: 4px 8px; border-radius: 4px; font-size: 10px; margin: 2px; display: inline-block;">Teletransporte</span>
                    </div>
                    <button class="select-character btn-3d" data-character="kai">Selecionar</button>
                </div>
                </div>
            </div>
        </div>
        
            <!-- Submenu de Habilidades -->
            <div id="skillsMenu" class="submenu" style="display: none;">
            <div class="submenu-header">
                <button id="backFromSkillsBtn" class="back-btn">← Voltar</button>
                <h2>⚡ Sistema de Habilidades</h2>
                <div class="skill-points-display">
                    <span class="skill-points-icon">⭐</span>
                    <span id="skillPoints">5</span> Pontos
                </div>
            </div>
            <div class="skills-content">
                <div class="skill-tree">
                    <h3>Árvore de Habilidades</h3>
                    <div class="skill-category">
                        <h4>Combate Básico</h4>
                        <div class="skill-item">
                            <div class="skill-info">
                                <span class="skill-name">Golpe Poderoso</span>
                                <span class="skill-description">Aumenta o dano do ataque básico</span>
                            </div>
                            <button class="skill-btn" data-skill="power_strike" disabled>Nível 1/5</button>
                        </div>
                        <div class="skill-item">
                            <div class="skill-info">
                                <span class="skill-name">Defesa Aprimorada</span>
                                <span class="skill-description">Reduz dano recebido</span>
                            </div>
                            <button class="skill-btn" data-skill="defense_boost" disabled>Nível 0/5</button>
                        </div>
                        <div class="skill-item">
                            <div class="skill-info">
                                <span class="skill-name">Velocidade de Ataque</span>
                                <span class="skill-description">Aumenta velocidade de ataque</span>
                            </div>
                            <button class="skill-btn" data-skill="attack_speed" disabled>Nível 0/5</button>
                        </div>
                    </div>
                    <div class="skill-category">
                        <h4>Magia Cósmica</h4>
                        <div class="skill-item">
                            <div class="skill-info">
                                <span class="skill-name">Bola de Fogo Estelar</span>
                                <span class="skill-description">Projétil de fogo que queima inimigos</span>
                            </div>
                            <button class="skill-btn" data-skill="fireball" disabled>Nível 1/3</button>
                        </div>
                        <div class="skill-item">
                            <div class="skill-info">
                                <span class="skill-name">Cura Cósmica</span>
                                <span class="skill-description">Restaura vida usando energia estelar</span>
                            </div>
                            <button class="skill-btn" data-skill="heal" disabled>Nível 1/3</button>
                        </div>
                        <div class="skill-item">
                            <div class="skill-info">
                                <span class="skill-name">Escudo Estelar</span>
                                <span class="skill-description">Cria barreira protetora</span>
                            </div>
                            <button class="skill-btn" data-skill="shield" disabled>Nível 0/3</button>
                        </div>
                    </div>
                    <div class="skill-category">
                        <h4>Habilidades Especiais</h4>
                        <div class="skill-item">
                            <div class="skill-info">
                                <span class="skill-name">Dash Cósmico</span>
                                <span class="skill-description">Movimento rápido em qualquer direção</span>
                            </div>
                            <button class="skill-btn" data-skill="dash" disabled>Nível 0/2</button>
                        </div>
                        <div class="skill-item">
                            <div class="skill-info">
                                <span class="skill-name">Explosão Estelar</span>
                                <span class="skill-description">Ataque em área com grande dano</span>
                            </div>
                            <button class="skill-btn" data-skill="explosion" disabled>Nível 0/1</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
            <!-- Submenu de Inventário -->
            <div id="inventoryMenu" class="submenu" style="display: none;">
                <div class="submenu-header">
                    <button id="backFromInventoryBtn" class="back-btn">← Voltar</button>
                    <h2>🎒 Inventário</h2>
                    <div class="gold-display">
                        <span class="gold-icon">💰</span>
                        <span id="playerGold">1000</span>
                    </div>
                </div>
                <div class="submenu-content">
                    <div class="inventory-modern">
                        <div class="inventory-main">
                            <div class="inventory-grid" id="inventoryGrid">
                                <!-- Slots serão gerados dinamicamente -->
                            </div>
                            <div class="inventory-info">
                                <h3>Equipamentos</h3>
                                <div class="equipped-items">
                                    <div class="equipped-slot">
                                        <label>Arma:</label>
                                        <div id="equippedWeapon" class="equipped-item">Nenhuma</div>
                                    </div>
                                    <div class="equipped-slot">
                                        <label>Armadura:</label>
                                        <div id="equippedArmor" class="equipped-item">Nenhuma</div>
                                    </div>
                                    <div class="equipped-slot">
                                        <label>Acessório:</label>
                                        <div id="equippedAccessory" class="equipped-item">Nenhum</div>
                                    </div>
                                </div>
                        <div class="item-details" id="itemDetails">
                            <p>Selecione um item para ver detalhes</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Submenu de Loja -->
        <div id="shopMenu" class="submenu" style="display: none;">
            <div class="submenu-header">
                <button id="backFromShopBtn" class="back-btn">← Voltar</button>
                <h2>🏪 Loja</h2>
                <div class="gold-display">
                    <span class="gold-icon">💰</span>
                    <span id="shopPlayerGold">1000</span>
                </div>
            </div>
            <div class="submenu-content">
                <div class="shop-modern">
                    <div class="shop-categories">
                        <button class="category-btn active" data-category="all">Todos</button>
                        <button class="category-btn" data-category="weapon">Armas</button>
                        <button class="category-btn" data-category="armor">Armaduras</button>
                        <button class="category-btn" data-category="consumable">Poções</button>
                        <button class="category-btn" data-category="gem">Gemas</button>
                    </div>
                    <div class="shop-main">
                        <div class="shop-items" id="shopItems">
                            <!-- Itens serão gerados dinamicamente -->
                        </div>
                        <div class="shop-info">
                            <h3>Informações do Item</h3>
                            <div class="item-details" id="shopItemDetails">
                                <p>Selecione um item para ver detalhes</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Submenu de Missões -->
        <div id="missionsMenu" class="submenu" style="display: none;">
            <div class="submenu-header">
                <button id="backFromMissionsBtn" class="back-btn">← Voltar</button>
                <h2>🎯 Missões</h2>
                <div class="player-info">
                    <span class="player-level">Lv.1</span>
                    <span class="player-name">Player</span>
                    <span class="player-gold">💰 1000</span>
                </div>
            </div>
            <div class="submenu-content">
                <div class="missions-modern">
                    <div class="missions-tabs">
                        <button class="mission-tab active" data-tab="story">📖 História</button>
                        <button class="mission-tab" data-tab="daily">📅 Diárias</button>
                        <button class="mission-tab" data-tab="weekly">📆 Semanais</button>
                        <button class="mission-tab" data-tab="events">🎉 Eventos</button>
                    </div>
                    <div class="missions-map">
                        <div class="location-section">
                            <h3>🌌 Santuário das Estrelas</h3>
                            <div class="missions-grid">
                                <div class="mission-card" data-mission="tutorial">
                                    <div class="mission-icon" style="background: linear-gradient(135deg, #FFD700, #FFA500);">⭐</div>
                                    <div class="mission-info">
                                        <h4>Tutorial Inicial</h4>
                                        <p>Aprenda os controles básicos do jogo</p>
                                        <div class="mission-details">
                                            <span>Nível 1</span>
                                            <span>Fácil</span>
                                        </div>
                                        <div class="mission-rewards">
                                            <span>💰 100</span>
                                            <span>⭐ 50 EXP</span>
                                        </div>
                                        <button class="mission-select-btn" data-mission="tutorial">Iniciar</button>
                                    </div>
                                </div>
                                <div class="mission-card" data-mission="first_quest">
                                    <div class="mission-icon" style="background: linear-gradient(135deg, #87CEEB, #4682B4);">🔍</div>
                                    <div class="mission-info">
                                        <h4>Primeira Busca</h4>
                                        <p>Encontre Fragmentos de Estrela perdidos</p>
                                        <div class="mission-details">
                                            <span>Nível 1-3</span>
                                            <span>Fácil</span>
                                        </div>
                                        <div class="mission-rewards">
                                            <span>💰 200</span>
                                            <span>⭐ 100 EXP</span>
                                        </div>
                                        <button class="mission-select-btn" data-mission="first_quest">Iniciar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="location-section">
                            <h3>🌌 Vazio Cósmico</h3>
                            <div class="missions-grid">
                                <div class="mission-card" data-mission="void_exploration">
                                    <div class="mission-icon" style="background: linear-gradient(135deg, #9370DB, #8A2BE2);">🌌</div>
                                    <div class="mission-info">
                                        <h4>Exploração do Vazio</h4>
                                        <p>Derrote Filhos do Vazio e colete fragmentos</p>
                                        <div class="mission-details">
                                            <span>Nível 3-5</span>
                                            <span>Médio</span>
                                        </div>
                                        <div class="mission-rewards">
                                            <span>💰 500</span>
                                            <span>⭐ 250 EXP</span>
                                        </div>
                                        <button class="mission-select-btn" data-mission="void_exploration">Iniciar</button>
                                    </div>
                                </div>
                                <div class="mission-card" data-mission="void_boss">
                                    <div class="mission-icon" style="background: linear-gradient(135deg, #2F4F4F, #708090);">👹</div>
                                    <div class="mission-info">
                                        <h4>Chefe do Vazio</h4>
                                        <p>Enfrente o Guardião das Sombras</p>
                                        <div class="mission-details">
                                            <span>Nível 5-7</span>
                                            <span>Difícil</span>
                                        </div>
                                        <div class="mission-rewards">
                                            <span>💰 1000</span>
                                            <span>⭐ 500 EXP</span>
                                            <span>🏆 Item Raro</span>
                                        </div>
                                        <button class="mission-select-btn" data-mission="void_boss">Iniciar</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Sistema de Combate de Missão -->
                <div id="missionGameContainer" style="display: none;">
                    <div class="mission-game-header" style="background: linear-gradient(135deg, rgba(26, 26, 46, 0.9), rgba(22, 33, 62, 0.9)); padding: 15px; border-radius: 10px; margin-bottom: 20px; border: 2px solid #444444;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h3 style="color: #FFD700; margin-bottom: 10px;">🎮 Missão em Andamento</h3>
                                <div style="display: flex; gap: 20px;">
                                    <div class="bar-container" style="width: 150px; height: 15px; background-color: #4a5568; border: 2px solid #a0aec0; border-radius: 5px;">
                                        <div id="player-health-bar" class="health-bar" style="height: 100%; background-color: #48bb78; transition: width 0.2s linear;"></div>
                                    </div>
                                    <div class="bar-container" style="width: 150px; height: 15px; background-color: #4a5568; border: 2px solid #a0aec0; border-radius: 5px;">
                                        <div id="player-mana-bar" class="mana-bar" style="height: 100%; background-color: #63b3ed; transition: width 0.2s linear;"></div>
                                    </div>
                                </div>
                            </div>
                            <div id="mission-status" style="color: #FFD700; font-size: 18px; font-weight: bold;">
                                Pressione "Iniciar" para começar
                            </div>
                            <div style="text-align: right;">
                                <h4 style="color: #87CEEB; margin-bottom: 5px;">Controles</h4>
                                <p style="font-size: 12px; color: #87CEEB;">← →: Mover | ↑: Pular | Z: Atacar</p>
                                <p style="font-size: 12px; color: #87CEEB;">Shift: Dash | A: Golpe Poderoso</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Mundo do Jogo -->
                    <div id="game-world" style="background: linear-gradient(135deg, #2d3748, #4a5568); width: 100%; height: 400px; border: 4px solid #718096; position: relative; overflow: hidden; border-radius: 12px; box-shadow: 0 10px 25px rgba(0, 0, 0, 0.5);">
                        <div id="player" class="player" style="background-color: #4299e1; position: absolute; border: 2px solid #2b6cb0; border-radius: 4px; box-shadow: 0 0 10px #4299e1; transition: opacity 0.2s;"></div>
                    </div>
                    
                    <!-- Tela de Fim de Jogo/Vitória -->
                    <div id="game-over-screen" style="display: none; position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.75); flex-direction: column; align-items: center; justify-content: center; z-index: 1000;">
                        <h1 id="end-game-title" style="font-size: 3rem; font-weight: bold; margin-bottom: 1rem; color: #FFD700;">Game Over</h1>
                        <p id="end-game-subtitle" style="font-size: 1.25rem; margin-bottom: 2rem; color: #87CEEB;">Tente novamente!</p>
                        <button id="restart-button" class="btn-3d" style="padding: 1rem 2rem; font-size: 1.25rem;">Reiniciar Missão</button>
                    </div>
                    
                    <!-- Tela Inicial da Missão -->
                    <div id="start-screen" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0, 0, 0, 0.75); flex-direction: column; align-items: center; justify-content: center; z-index: 1000;">
                        <h1 style="font-size: 3rem; font-weight: bold; margin-bottom: 1rem; color: #FFD700;">Missão Selecionada</h1>
                        <p id="mission-description" style="font-size: 1.25rem; margin-bottom: 2rem; color: #87CEEB;">Derrote todos os inimigos para vencer!</p>
                        <button id="start-button" class="btn-3d" style="padding: 1rem 2rem; font-size: 1.25rem;">Iniciar Missão</button>
                        <button id="back-to-missions" class="btn-3d" style="padding: 0.5rem 1rem; font-size: 1rem; margin-top: 1rem;">Voltar às Missões</button>
                    </div>
                </div>
                
                <div id="roomsContainer" style="display: none;">
                    <!-- Lista de salas será gerada dinamicamente -->
                </div>
                <div id="createRoomContainer" style="display: none;">
                    <!-- Formulário de criação de sala será gerado dinamicamente -->
                </div>
                <div id="roomLobbyContainer" style="display: none;">
                    <!-- Lobby da sala será gerado dinamicamente -->
                </div>
            </div>
        </div>
        
            <!-- Submenu de Controles -->
            <div id="controlsMenu" class="submenu" style="display: none;">
            <div class="submenu-header">
                <button id="backFromControlsBtn" class="back-btn">← Voltar</button>
                <h2>🎮 Controles</h2>
            </div>
            <div class="controls-content">
                <div class="control-section">
                    <h3>Movimento</h3>
                    <div class="control-item">
                        <span>⬅️ Seta Esquerda</span>
                        <span>Mover para a esquerda</span>
                    </div>
                    <div class="control-item">
                        <span>➡️ Seta Direita</span>
                        <span>Mover para a direita</span>
                    </div>
                    <div class="control-item">
                        <span>⬆️ Seta para Cima</span>
                        <span>Pular</span>
                    </div>
                    <div class="control-item">
                        <span>⬇️ Seta para Baixo</span>
                        <span>Agachar</span>
                    </div>
                </div>
                <div class="control-section">
                    <h3>Combate</h3>
                    <div class="control-item">
                        <span>Z</span>
                        <span>Atacar</span>
                    </div>
                    <div class="control-item">
                        <span>X</span>
                        <span>Defender</span>
                    </div>
                    <div class="control-item">
                        <span>C</span>
                        <span>Agarrar/Arremessar</span>
                    </div>
                </div>
                <div class="control-section">
                    <h3>Habilidades</h3>
                    <div class="control-item">
                        <span>K</span>
                        <span>Bola de Fogo</span>
                    </div>
                    <div class="control-item">
                        <span>L</span>
                        <span>Curar</span>
                    </div>
                </div>
            </div>
        </div>
        
            <!-- Submenu Sobre -->
            <div id="aboutMenu" class="submenu" style="display: none;">
            <div class="submenu-header">
                <button id="backFromAboutBtn" class="back-btn">← Voltar</button>
                <h2>ℹ️ Sobre o Jogo</h2>
            </div>
            <div class="about-content">
                <div class="game-info">
                    <h3>Grand Chase Web</h3>
                    <p>Versão: 1.0.0</p>
                    <p>Desenvolvido com HTML5, CSS3 e JavaScript</p>
                </div>
                <div class="game-description">
                    <h4>Descrição</h4>
                    <p>Um jogo de ação 2D inspirado no clássico Grand Chase. Explore dungeons, derrote inimigos e evolua seu personagem em uma aventura épica!</p>
                </div>
                <div class="features">
                    <h4>Características</h4>
                    <ul>
                        <li>✅ Sistema de combate dinâmico</li>
                        <li>✅ Múltiplos personagens</li>
                        <li>✅ Sistema de habilidades</li>
                        <li>✅ Inventário de itens</li>
                        <li>✅ Efeitos visuais</li>
                        <li>✅ Sistema de progressão</li>
                    </ul>
                </div>
            </div>
        </div>
        
            <!-- Menu de Pausa -->
            <div id="pauseMenu" class="submenu" style="display: none;">
            <div class="submenu-header">
                <h2>⏸️ Jogo Pausado</h2>
            </div>
            <div class="pause-content">
                <div class="pause-buttons">
                    <button id="resumeBtn" class="btn-modern">▶️ Continuar</button>
                    <button id="restartBtn" class="btn-modern">🔄 Reiniciar</button>
                    <button id="mainMenuBtn" class="btn-modern">🏠 Menu Principal</button>
                    <button id="settingsBtn2" class="btn-modern">⚙️ Configurações</button>
                </div>
            </div>
        </div>
        
            <!-- Menu de Configurações -->
            <div id="settingsMenu" class="submenu" style="display: none;">
            <div class="submenu-header">
                <button id="backFromSettingsBtn" class="back-btn">← Voltar</button>
                <h2>⚙️ Configurações</h2>
            </div>
            <div class="settings-content">
                <div class="settings-section">
                    <h3>🔊 Áudio</h3>
                    <div class="setting-item">
                        <label>Volume Geral:</label>
                        <div class="setting-control">
                            <input type="range" id="masterVolume" min="0" max="100" value="50">
                            <span id="masterVolumeValue">50%</span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label>Volume de Efeitos:</label>
                        <div class="setting-control">
                            <input type="range" id="sfxVolume" min="0" max="100" value="50">
                            <span id="sfxVolumeValue">50%</span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label>Volume de Música:</label>
                        <div class="setting-control">
                            <input type="range" id="musicVolume" min="0" max="100" value="50">
                            <span id="musicVolumeValue">50%</span>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>🎮 Controles</h3>
                    <div class="setting-item">
                        <label>Inverter Eixo Y:</label>
                        <div class="setting-control">
                            <input type="checkbox" id="invertY">
                            <span>Desabilitado</span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label>Sensibilidade do Mouse:</label>
                        <div class="setting-control">
                            <input type="range" id="mouseSensitivity" min="1" max="10" value="5">
                            <span id="mouseSensitivityValue">5</span>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>🎨 Gráficos</h3>
                    <div class="setting-item">
                        <label>Qualidade dos Gráficos:</label>
                        <div class="setting-control">
                            <select id="graphicsQuality">
                                <option value="low">Baixa</option>
                                <option value="medium" selected>Média</option>
                                <option value="high">Alta</option>
                            </select>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label>Efeitos de Partículas:</label>
                        <div class="setting-control">
                            <input type="checkbox" id="particleEffects" checked>
                            <span>Habilitado</span>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label>FPS Máximo:</label>
                        <div class="setting-control">
                            <select id="maxFPS">
                                <option value="30">30 FPS</option>
                                <option value="60" selected>60 FPS</option>
                                <option value="120">120 FPS</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>🎯 Jogabilidade</h3>
                    <div class="setting-item">
                        <label>Dificuldade:</label>
                        <div class="setting-control">
                            <select id="difficulty">
                                <option value="easy">Fácil</option>
                                <option value="normal" selected>Normal</option>
                                <option value="hard">Difícil</option>
                            </select>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label>Auto-save:</label>
                        <div class="setting-control">
                            <input type="checkbox" id="autoSave" checked>
                            <span>Habilitado</span>
                        </div>
                    </div>
                </div>
                
                <div class="settings-actions">
                    <button id="resetSettingsBtn" class="settings-btn reset">🔄 Resetar</button>
                    <button id="saveSettingsBtn" class="settings-btn save">💾 Salvar</button>
                </div>
            </div>
            </div>
        </div>
        
    <!-- Scripts otimizados com carregamento assíncrono -->
    <script src="js/shop-system.js"></script>
    <script src="js/inventory-system.js"></script>
    <script src="js/mission-system.js"></script>
    <script src="js/lobby-system.js"></script>
    <script src="fix-bugs.js"></script>
    
    <script>
        // Método initializeUI que estava faltando
        function initializeUI() {
            // Inicializar elementos de UI se necessário
            const healthBar = document.getElementById('healthFill');
            const manaBar = document.getElementById('manaFill');
            const levelValue = document.getElementById('levelValue');
            const expValue = document.getElementById('expValue');
            
            if (healthBar) healthBar.style.width = '100%';
            if (manaBar) manaBar.style.width = '100%';
            if (levelValue) levelValue.textContent = '1';
            if (expValue) expValue.textContent = '0/100';
        }
        
        // Sistema de carregamento otimizado
        class GameLoader {
            constructor() {
                this.scripts = [
                    'js/sprite-manager.js',
                    'js/particles.js',
                    'js/enemy.js',
                    'js/player.js',
                    'js/combat.js',
                    'js/ui.js',
                    'js/game.js',
                    'js/main.js'
                ];
                this.loadedCount = 0;
                this.startTime = performance.now();
            }
            
            async loadScript(src) {
                return new Promise((resolve, reject) => {
                    const script = document.createElement('script');
                    script.src = src;
                    script.async = true;
                    script.onload = resolve;
                    script.onerror = reject;
                    document.head.appendChild(script);
                });
            }
            
            async loadAllScripts() {
                try {
                    for (const script of this.scripts) {
                        await this.loadScript(script);
                        this.loadedCount++;
                        this.updateProgress();
                    }
                    this.onComplete();
                } catch (error) {
                    console.error('Erro ao carregar scripts:', error);
                    this.onError(error);
                }
            }
            
            updateProgress() {
                const progress = (this.loadedCount / this.scripts.length) * 100;
                const loadingText = document.querySelector('.loading-text');
                if (loadingText) {
                    loadingText.textContent = `Carregando... ${Math.round(progress)}%`;
                }
            }
            
            onComplete() {
                const loadTime = performance.now() - this.startTime;
                console.log(`🎮 Grand Chase Web carregado em ${loadTime.toFixed(2)}ms`);
                
                // Patch para corrigir método initializeUI
                if (window.Game && !window.Game.prototype.initializeUI) {
                    window.Game.prototype.initializeUI = initializeUI;
                }
                
                // Esconder loading screen
                const loadingScreen = document.getElementById('loadingScreen');
                if (loadingScreen) {
                    loadingScreen.style.opacity = '0';
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                    }, 500);
                }
                
                // Mostrar FPS counter em modo debug
                if (window.location.search.includes('debug=true')) {
                    document.getElementById('fpsCounter').style.display = 'block';
                }
            }
            
            onError(error) {
                const loadingText = document.querySelector('.loading-text');
                if (loadingText) {
                    loadingText.textContent = 'Erro ao carregar o jogo. Recarregue a página.';
                    loadingText.style.color = '#ff6b6b';
                }
            }
        }
        
        // Sistema de fallback para classes
        function ensureClassesLoaded() {
            const requiredClasses = ['Game', 'Player', 'Enemy', 'Particle', 'Projectile'];
            const missingClasses = requiredClasses.filter(cls => typeof window[cls] === 'undefined');
            
            if (missingClasses.length > 0) {
                console.warn('⚠️ Classes faltando:', missingClasses);
                // Tentar recarregar as classes faltantes
                return false;
            }
            return true;
        }
        
        // Inicializar carregamento
        const loader = new GameLoader();
        loader.loadAllScripts();
        
        // Gerenciar carregamento de imagens dos heróis
        function setupHeroImageFallbacks() {
            const heroImages = ['juno', 'atlas', 'vega', 'kai'];
            
            heroImages.forEach(hero => {
                const img = document.getElementById(`${hero}-preview`);
                
                if (img) {
                    const fallback = img.nextElementSibling; // Verificar se nextElementSibling existe
                    
                    img.onerror = () => {
                        console.warn(`⚠️ Erro ao carregar imagem do ${hero}, usando fallback`);
                        img.style.display = 'none';
                        if (fallback) fallback.style.display = 'block'; // Só acessar se existir
                    };
                    
                    img.onload = () => {
                        console.log(`✅ Imagem do ${hero} carregada com sucesso`);
                        if (fallback) fallback.style.display = 'none'; // Só acessar se existir
                    };
                }
            });
        }
        
        // Configurar fallbacks quando a página carregar
        document.addEventListener('DOMContentLoaded', setupHeroImageFallbacks);
        
        // Inicializar sistema de missões quando a página carregar
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                initializeMissionSystem();
            }, 1000);
        });
        
        // Verificação adicional após carregamento
        setTimeout(() => {
            if (!ensureClassesLoaded()) {
                console.log('🔄 Tentando recarregar classes faltantes...');
                // Recarregar página se necessário
                if (window.location.search.includes('auto-reload=true')) {
                    window.location.reload();
                }
            }
        }, 1000);
        
        // Sistema de performance monitoring
        class PerformanceMonitor {
            constructor() {
                this.fps = 0;
                this.frameCount = 0;
                this.lastTime = performance.now();
                this.fpsElement = document.getElementById('fpsCounter');
            }
            
            update() {
                this.frameCount++;
                const currentTime = performance.now();
                
                if (currentTime - this.lastTime >= 1000) {
                    this.fps = Math.round((this.frameCount * 1000) / (currentTime - this.lastTime));
                    this.frameCount = 0;
                    this.lastTime = currentTime;
                    
                    if (this.fpsElement && this.fpsElement.style.display !== 'none') {
                        this.fpsElement.textContent = `FPS: ${this.fps}`;
                        this.fpsElement.style.color = this.fps >= 55 ? '#00ff00' : this.fps >= 30 ? '#ffaa00' : '#ff0000';
                    }
                }
            }
        }
        
        // Inicializar monitor de performance
        const perfMonitor = new PerformanceMonitor();
        
        // Hook no game loop para monitoramento
        const originalRequestAnimationFrame = window.requestAnimationFrame;
        window.requestAnimationFrame = function(callback) {
            return originalRequestAnimationFrame(function(time) {
                perfMonitor.update();
                callback(time);
            });
        };
        
        // Prevenção de context menu no canvas
        document.addEventListener('contextmenu', (e) => {
            if (e.target.tagName === 'CANVAS') {
                e.preventDefault();
            }
        });
        
        // Prevenção de drag no canvas
        document.addEventListener('dragstart', (e) => {
            if (e.target.tagName === 'CANVAS') {
                e.preventDefault();
            }
        });
        
        // Sistema de debug melhorado
        window.debugGame = function() {
            console.log('🎮 Debug Info:');
            console.log('- Game State:', window.game?.gameState);
            console.log('- Player:', window.game?.player);
            console.log('- Enemies:', window.game?.enemies?.length);
            console.log('- Particles:', window.game?.particles?.length);
            console.log('- Performance:', perfMonitor.fps + ' FPS');
            console.log('- Classes carregadas:');
            console.log('  - Game:', typeof window.Game);
            console.log('  - Player:', typeof window.Player);
            console.log('  - Enemy:', typeof window.Enemy);
            console.log('  - Particle:', typeof window.Particle);
            console.log('  - Projectile:', typeof window.Projectile);
            console.log('  - SpriteManager:', typeof window.SpriteManager);
            console.log('  - CombatSystem:', typeof window.CombatSystem);
            console.log('  - UIManager:', typeof window.UIManager);
        };
        
        // Função para forçar recarregamento
        window.reloadGame = function() {
            console.log('🔄 Recarregando jogo...');
            window.location.reload();
        };
        
        // Função para verificar status
        window.checkStatus = function() {
            const status = {
                classes: {
                    Game: typeof window.Game,
                    Player: typeof window.Player,
                    Enemy: typeof window.Enemy,
                    Particle: typeof window.Particle,
                    Projectile: typeof window.Projectile
                },
                game: {
                    exists: !!window.game,
                    state: window.game?.gameState,
                    player: !!window.game?.player
                },
                performance: {
                    fps: perfMonitor.fps,
                    loadTime: performance.now() - loader.startTime
                }
            };
            console.table(status);
            return status;
        };
        
        // Atalhos de teclado para debug
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.shiftKey) {
                switch(e.key) {
                    case 'D':
                        e.preventDefault();
                        window.debugGame();
                        break;
                    case 'F':
                        e.preventDefault();
                        const fpsCounter = document.getElementById('fpsCounter');
                        fpsCounter.style.display = fpsCounter.style.display === 'none' ? 'block' : 'none';
                        break;
                    case 'S':
                        e.preventDefault();
                        window.checkStatus();
                        break;
                    case 'R':
                        e.preventDefault();
                        window.reloadGame();
                        break;
                }
            }
        });
        
        // Instruções de debug no console
        console.log('🔧 Comandos de debug disponíveis:');
        console.log('  - debugGame() - Mostrar estado do jogo');
        console.log('  - checkStatus() - Verificar status das classes');
        console.log('  - reloadGame() - Recarregar o jogo');
        console.log('  - Ctrl+Shift+D - Debug rápido');
        console.log('  - Ctrl+Shift+F - Toggle FPS counter');
        console.log('  - Ctrl+Shift+S - Status das classes');
        console.log('  - Ctrl+Shift+R - Recarregar jogo');
    </script>

    <!-- Sistema de Missões Funcional -->
    <script>
        // Verificar se MissionSystem já existe antes de declarar
        if (typeof MissionSystem === 'undefined') {
            // Sistema de Missões
            class MissionSystem {
                constructor() {
                    this.currentMission = null;
                    this.missionProgress = {};
                    this.missionObjectives = {};
                    this.missionRewards = {};
                    this.completedMissions = [];
                    this.activeObjectives = [];
                    
                    this.initializeMissions();
                    this.setupMissionEventListeners();
                }

                initializeMissions() {
                    // Missão Tutorial Completa
                    this.missionData = {
                        tutorial: {
                            id: 'tutorial',
                            name: 'Tutorial Inicial',
                            description: 'Aprenda os controles básicos e mecânicas do jogo',
                            difficulty: 'Fácil',
                            level: 1,
                            objectives: [
                                { id: 'move_tutorial', text: 'Mova-se com WASD ou setas', completed: false, type: 'movement' },
                                { id: 'jump_tutorial', text: 'Pule com ESPAÇO', completed: false, type: 'jump' },
                                { id: 'attack_tutorial', text: 'Ataque com CLIQUE ESQUERDO', completed: false, type: 'attack' },
                                { id: 'skill_tutorial', text: 'Use habilidade com CLIQUE DIREITO', completed: false, type: 'skill' },
                                { id: 'defeat_enemy', text: 'Derrote 3 inimigos', completed: false, type: 'combat', target: 3, current: 0 }
                            ],
                            rewards: {
                                gold: 100,
                                exp: 50,
                                items: ['health_potion']
                            },
                            status: 'available' // available, active, completed
                        },
                        first_quest: {
                            id: 'first_quest',
                            name: 'Primeira Missão',
                            description: 'Explore o Santuário das Estrelas e colete cristais de energia',
                            difficulty: 'Fácil',
                            level: 2,
                            objectives: [
                                { id: 'explore_area', text: 'Explore 5 áreas diferentes', completed: false, type: 'exploration', target: 5, current: 0 },
                                { id: 'collect_crystals', text: 'Colete 10 cristais de energia', completed: false, type: 'collection', target: 10, current: 0 },
                                { id: 'defeat_goblins', text: 'Derrote 5 goblins', completed: false, type: 'combat', target: 5, current: 0 }
                            ],
                            rewards: {
                                gold: 250,
                                exp: 100,
                                items: ['energy_crystal', 'health_potion']
                            },
                            status: 'locked' // locked, available, active, completed
                        }
                    };
                }

                setupMissionEventListeners() {
                    // Event listeners para botões de missão
                    document.addEventListener('click', (e) => {
                        if (e.target.classList.contains('mission-select-btn')) {
                            const missionId = e.target.getAttribute('data-mission');
                            this.startMission(missionId);
                        }
                    });

                    // Event listeners para progresso da missão
                    document.addEventListener('keydown', (e) => {
                        this.handleMissionProgress(e);
                    });

                    // Event listeners para combate
                    document.addEventListener('enemyDefeated', (e) => {
                        this.updateCombatProgress(e.detail.enemyType);
                    });

                    // Event listeners para coleta de itens
                    document.addEventListener('itemCollected', (e) => {
                        this.updateCollectionProgress(e.detail.itemType);
                    });
                }

                startMission(missionId) {
                    if (!this.missionData[missionId]) return;

                    const mission = this.missionData[missionId];
                    
                    if (mission.status === 'locked') {
                        this.showMessage('Missão bloqueada! Complete a missão anterior primeiro.', 'warning');
                        return;
                    }

                    if (mission.status === 'completed') {
                        this.showMessage('Missão já completada!', 'info');
                        return;
                    }

                    // Iniciar missão
                    this.currentMission = mission;
                    mission.status = 'active';
                    this.activeObjectives = [...mission.objectives];
                    
                    // Mostrar interface de missão
                    this.showMissionInterface();
                    
                    // Iniciar jogo se não estiver rodando
                    if (typeof game !== 'undefined' && game.state === 'menu') {
                        game.startGame();
                    }

                    this.showMessage(`Missão iniciada: ${mission.name}`, 'success');
                    this.updateMissionUI();
                }

                showMissionInterface() {
                    // Criar interface de missão se não existir
                    let missionUI = document.getElementById('missionUI');
                    if (!missionUI) {
                        missionUI = document.createElement('div');
                        missionUI.id = 'missionUI';
                        missionUI.className = 'mission-ui';
                        missionUI.innerHTML = `
                            <div class="mission-header">
                                <h3 id="missionTitle">Missão Ativa</h3>
                                <button id="closeMissionBtn" class="close-mission-btn">×</button>
                            </div>
                            <div class="mission-objectives" id="missionObjectives">
                                <!-- Objetivos serão inseridos aqui -->
                            </div>
                            <div class="mission-progress">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="missionProgressBar"></div>
                                </div>
                                <span id="missionProgressText">0%</span>
                            </div>
                        `;
                        document.body.appendChild(missionUI);

                        // Event listener para fechar
                        document.getElementById('closeMissionBtn').addEventListener('click', () => {
                            this.hideMissionInterface();
                        });
                    }

                    this.updateMissionInterface();
                }

                updateMissionInterface() {
                    if (!this.currentMission) return;

                    const title = document.getElementById('missionTitle');
                    const objectives = document.getElementById('missionObjectives');
                    const progressBar = document.getElementById('missionProgressBar');
                    const progressText = document.getElementById('missionProgressText');

                    if (title) title.textContent = this.currentMission.name;
                    
                    if (objectives) {
                        objectives.innerHTML = this.activeObjectives.map(obj => `
                            <div class="objective-item ${obj.completed ? 'completed' : ''}">
                                <span class="objective-icon">${obj.completed ? '✓' : '○'}</span>
                                <span class="objective-text">${obj.text}</span>
                                ${obj.target ? `<span class="objective-progress">${obj.current}/${obj.target}</span>` : ''}
                            </div>
                        `).join('');
                    }

                    // Atualizar progresso
                    const completedCount = this.activeObjectives.filter(obj => obj.completed).length;
                    const totalCount = this.activeObjectives.length;
                    const progress = (completedCount / totalCount) * 100;

                    if (progressBar) {
                        progressBar.style.width = `${progress}%`;
                    }
                    if (progressText) {
                        progressText.textContent = `${Math.round(progress)}%`;
                    }
                }

                hideMissionInterface() {
                    const missionUI = document.getElementById('missionUI');
                    if (missionUI) {
                        missionUI.style.display = 'none';
                    }
                }

                handleMissionProgress(event) {
                    if (!this.currentMission) return;

                    const key = event.key.toLowerCase();
                    
                    // Verificar objetivos de movimento
                    if (['w', 'a', 's', 'd', 'arrowup', 'arrowdown', 'arrowleft', 'arrowright'].includes(key)) {
                        this.completeObjective('move_tutorial');
                    }
                    
                    // Verificar objetivo de pulo
                    if (key === ' ') {
                        this.completeObjective('jump_tutorial');
                    }
                    
                    // Verificar objetivo de ataque
                    if (event.button === 0) { // Clique esquerdo
                        this.completeObjective('attack_tutorial');
                    }
                    
                    // Verificar objetivo de habilidade
                    if (event.button === 2) { // Clique direito
                        this.completeObjective('skill_tutorial');
                    }
                }

                completeObjective(objectiveId) {
                    const objective = this.activeObjectives.find(obj => obj.id === objectiveId);
                    if (objective && !objective.completed) {
                        objective.completed = true;
                        this.updateMissionInterface();
                        this.checkMissionCompletion();
                    }
                }

                updateCombatProgress(enemyType) {
                    if (!this.currentMission) return;

                    // Atualizar objetivos de combate
                    this.activeObjectives.forEach(obj => {
                        if (obj.type === 'combat' && !obj.completed) {
                            obj.current = (obj.current || 0) + 1;
                            if (obj.current >= obj.target) {
                                obj.completed = true;
                            }
                        }
                    });

                    this.updateMissionInterface();
                    this.checkMissionCompletion();
                }

                updateCollectionProgress(itemType) {
                    if (!this.currentMission) return;

                    // Atualizar objetivos de coleta
                    this.activeObjectives.forEach(obj => {
                        if (obj.type === 'collection' && !obj.completed) {
                            obj.current = (obj.current || 0) + 1;
                            if (obj.current >= obj.target) {
                                obj.completed = true;
                            }
                        }
                    });

                    this.updateMissionInterface();
                    this.checkMissionCompletion();
                }

                checkMissionCompletion() {
                    if (!this.currentMission) return;

                    const allCompleted = this.activeObjectives.every(obj => obj.completed);
                    
                    if (allCompleted) {
                        this.completeMission();
                    }
                }

                completeMission() {
                    if (!this.currentMission) return;

                    // Marcar missão como completada
                    this.currentMission.status = 'completed';
                    this.completedMissions.push(this.currentMission.id);
                    
                    // Dar recompensas
                    this.giveRewards(this.currentMission.rewards);
                    
                    // Mostrar mensagem de conclusão
                    this.showMessage(`Missão completada: ${this.currentMission.name}`, 'success');
                    
                    // Desbloquear próxima missão
                    this.unlockNextMission();
                    
                    // Esconder interface de missão
                    this.hideMissionInterface();
                    
                    // Limpar missão atual
                    this.currentMission = null;
                    this.activeObjectives = [];
                    
                    this.updateMissionUI();
                }

                giveRewards(rewards) {
                    // Implementar sistema de recompensas
                    if (rewards.gold) {
                        // Adicionar ouro ao jogador
                        console.log(`Recompensa: ${rewards.gold} ouro`);
                    }
                    
                    if (rewards.exp) {
                        // Adicionar experiência
                        console.log(`Recompensa: ${rewards.exp} EXP`);
                    }
                    
                    if (rewards.items) {
                        // Adicionar itens ao inventário
                        console.log(`Recompensas: ${rewards.items.join(', ')}`);
                    }
                }

                unlockNextMission() {
                    // Desbloquear próxima missão na sequência
                    if (this.missionData.first_quest.status === 'locked') {
                        this.missionData.first_quest.status = 'available';
                    }
                }

                updateMissionUI() {
                    // Atualizar interface de missões
                    const missionCards = document.querySelectorAll('.mission-card');
                    missionCards.forEach(card => {
                        const missionId = card.getAttribute('data-mission');
                        const mission = this.missionData[missionId];
                        
                        if (mission) {
                            const btn = card.querySelector('.mission-select-btn');
                            if (mission.status === 'locked') {
                                btn.textContent = 'Bloqueada';
                                btn.disabled = true;
                                btn.classList.add('disabled');
                            } else if (mission.status === 'completed') {
                                btn.textContent = 'Completada';
                                btn.disabled = true;
                                btn.classList.add('completed');
                            } else if (mission.status === 'active') {
                                btn.textContent = 'Em Andamento';
                                btn.disabled = true;
                                btn.classList.add('active');
                            } else {
                                btn.textContent = 'Iniciar';
                                btn.disabled = false;
                                btn.classList.remove('disabled', 'completed', 'active');
                            }
                        }
                    });
                }

                showMessage(text, type = 'info') {
                    // Criar notificação
                    const notification = document.createElement('div');
                    notification.className = `mission-notification ${type}`;
                    notification.textContent = text;
                    
                    document.body.appendChild(notification);
                    
                    // Remover após 3 segundos
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.parentNode.removeChild(notification);
                        }
                    }, 3000);
                }
            }
        }

        // Inicializar sistema de missões apenas se não existir
        if (typeof missionSystem === 'undefined') {
            const missionSystem = new MissionSystem();
        }

            // Sistema de Editor de Jogo
            class GameEditor {
                constructor() {
                    this.isOpen = false;
                    this.gameData = this.loadGameData();
                    this.setupEventListeners();
                }

                setupEventListeners() {
                    // Toggle do editor
                    document.getElementById('editorToggle').addEventListener('click', () => {
                        this.toggleEditor();
                    });

                    // Carregar dados quando selecionar personagem
                    document.getElementById('characterSelect').addEventListener('change', (e) => {
                        this.loadCharacterData(e.target.value);
                    });

                    // Carregar dados quando selecionar inimigo
                    document.getElementById('enemySelect').addEventListener('change', (e) => {
                        this.loadEnemyData(e.target.value);
                    });

                    // Carregar dados quando selecionar missão
                    document.getElementById('missionSelect').addEventListener('change', (e) => {
                        this.loadMissionData(e.target.value);
                    });
                }

                toggleEditor() {
                    this.isOpen = !this.isOpen;
                    const editor = document.getElementById('gameEditor');
                    const body = document.body;
                    
                    if (this.isOpen) {
                        editor.classList.add('open');
                        body.classList.add('editor-open');
                    } else {
                        editor.classList.remove('open');
                        body.classList.remove('editor-open');
                    }
                }

                loadGameData() {
                    // Carregar dados salvos ou usar padrões
                    const defaultData = {
                        characters: {
                            juno: { health: 100, damage: 25, speed: 5, defense: 10, description: 'Caçadora de estrelas experiente', special: 'Ataque Estelar' },
                            atlas: { health: 120, damage: 20, speed: 4, defense: 15, description: 'Guardião cósmico poderoso', special: 'Escudo Cósmico' },
                            vega: { health: 80, damage: 30, speed: 7, defense: 8, description: 'Exploradora espacial ágil', special: 'Salto Dimensional' },
                            kai: { health: 110, damage: 28, speed: 6, defense: 12, description: 'Guerreiro estelar equilibrado', special: 'Fúria Estelar' }
                        },
                        enemies: {
                            goblin: { health: 50, damage: 15, speed: 2, reward: 25, description: 'Inimigo básico com ataques simples' },
                            orc: { health: 80, damage: 25, speed: 1, reward: 50, description: 'Inimigo médio mais resistente' },
                            dragon: { health: 200, damage: 40, speed: 3, reward: 150, description: 'Inimigo forte com ataques poderosos' },
                            boss: { health: 500, damage: 60, speed: 2, reward: 500, description: 'Chefe final extremamente poderoso' }
                        },
                        economy: {
                            startingGold: 1000,
                            goldPerEnemy: 10,
                            prices: {
                                healthPotion: 50,
                                manaPotion: 75,
                                basicWeapon: 200,
                                basicArmor: 300
                            }
                        },
                        missions: {
                            tutorial: { name: 'Tutorial Inicial', description: 'Aprenda os controles básicos do jogo', difficulty: 'Fácil', gold: 100, exp: 50 },
                            first_quest: { name: 'Primeira Missão', description: 'Explore o Santuário das Estrelas', difficulty: 'Fácil', gold: 250, exp: 100 }
                        },
                        settings: {
                            gameName: 'Nova Remains',
                            version: '1.0.0',
                            primaryColor: '#3b82f6',
                            secondaryColor: '#1d4ed8',
                            fps: 60,
                            difficulty: 'normal'
                        }
                    };

                    const saved = localStorage.getItem('novaRemainsEditorData');
                    return saved ? { ...defaultData, ...JSON.parse(saved) } : defaultData;
                }

                saveGameData() {
                    localStorage.setItem('novaRemainsEditorData', JSON.stringify(this.gameData));
                    this.showNotification('Dados salvos com sucesso!', 'success');
                }

                loadCharacterData(characterId) {
                    const char = this.gameData.characters[characterId];
                    if (char) {
                        document.getElementById('charHealth').value = char.health;
                        document.getElementById('charDamage').value = char.damage;
                        document.getElementById('charSpeed').value = char.speed;
                        document.getElementById('charDefense').value = char.defense;
                        document.getElementById('charDescription').value = char.description;
                        document.getElementById('charSpecial').value = char.special;
                    }
                }

                loadEnemyData(enemyId) {
                    const enemy = this.gameData.enemies[enemyId];
                    if (enemy) {
                        document.getElementById('enemyHealth').value = enemy.health;
                        document.getElementById('enemyDamage').value = enemy.damage;
                        document.getElementById('enemySpeed').value = enemy.speed;
                        document.getElementById('enemyReward').value = enemy.reward;
                        document.getElementById('enemyDescription').value = enemy.description;
                    }
                }

                loadMissionData(missionId) {
                    const mission = this.gameData.missions[missionId];
                    if (mission) {
                        document.getElementById('missionName').value = mission.name;
                        document.getElementById('missionDescription').value = mission.description;
                        document.getElementById('missionDifficulty').value = mission.difficulty;
                        document.getElementById('missionGold').value = mission.gold;
                        document.getElementById('missionExp').value = mission.exp;
                    }
                }

                showNotification(message, type = 'success') {
                    const notification = document.createElement('div');
                    notification.className = `notification ${type}`;
                    notification.textContent = message;
                    document.body.appendChild(notification);
                    
                    setTimeout(() => notification.classList.add('show'), 100);
                    setTimeout(() => {
                        notification.classList.remove('show');
                        setTimeout(() => notification.remove(), 300);
                    }, 3000);
                }
            }

            // Funções globais para o editor
            function toggleSection(sectionId) {
                const content = document.getElementById(sectionId);
                const toggle = content.previousElementSibling.querySelector('.section-toggle');
                
                if (content.classList.contains('expanded')) {
                    content.classList.remove('expanded');
                    toggle.classList.remove('expanded');
                } else {
                    content.classList.add('expanded');
                    toggle.classList.add('expanded');
                }
            }

            function saveCharacter() {
                const characterId = document.getElementById('characterSelect').value;
                const charData = {
                    health: parseInt(document.getElementById('charHealth').value),
                    damage: parseInt(document.getElementById('charDamage').value),
                    speed: parseInt(document.getElementById('charSpeed').value),
                    defense: parseInt(document.getElementById('charDefense').value),
                    description: document.getElementById('charDescription').value,
                    special: document.getElementById('charSpecial').value
                };
                
                gameEditor.gameData.characters[characterId] = charData;
                gameEditor.saveGameData();
            }

            function saveEnemy() {
                const enemyId = document.getElementById('enemySelect').value;
                const enemyData = {
                    health: parseInt(document.getElementById('enemyHealth').value),
                    damage: parseInt(document.getElementById('enemyDamage').value),
                    speed: parseInt(document.getElementById('enemySpeed').value),
                    reward: parseInt(document.getElementById('enemyReward').value),
                    description: document.getElementById('enemyDescription').value
                };
                
                gameEditor.gameData.enemies[enemyId] = enemyData;
                gameEditor.saveGameData();
            }

            function saveEconomy() {
                const economyData = {
                    startingGold: parseInt(document.getElementById('startingGold').value),
                    goldPerEnemy: parseInt(document.getElementById('goldPerEnemy').value),
                    prices: {
                        healthPotion: parseInt(document.getElementById('priceHealthPotion').value),
                        manaPotion: parseInt(document.getElementById('priceManaPotion').value),
                        basicWeapon: parseInt(document.getElementById('priceBasicWeapon').value),
                        basicArmor: parseInt(document.getElementById('priceBasicArmor').value)
                    }
                };
                
                gameEditor.gameData.economy = economyData;
                gameEditor.saveGameData();
            }

            function saveMission() {
                const missionId = document.getElementById('missionSelect').value;
                const missionData = {
                    name: document.getElementById('missionName').value,
                    description: document.getElementById('missionDescription').value,
                    difficulty: document.getElementById('missionDifficulty').value,
                    gold: parseInt(document.getElementById('missionGold').value),
                    exp: parseInt(document.getElementById('missionExp').value)
                };
                
                gameEditor.gameData.missions[missionId] = missionData;
                gameEditor.saveGameData();
            }

            function saveSettings() {
                const settingsData = {
                    gameName: document.getElementById('gameName').value,
                    version: document.getElementById('gameVersion').value,
                    primaryColor: document.getElementById('primaryColor').value,
                    secondaryColor: document.getElementById('secondaryColor').value,
                    fps: parseInt(document.getElementById('gameFPS').value),
                    difficulty: document.getElementById('globalDifficulty').value
                };
                
                gameEditor.gameData.settings = settingsData;
                gameEditor.saveGameData();
                
                // Aplicar mudanças visuais
                applySettingsChanges(settingsData);
            }

            function applySettingsChanges(settings) {
                // Atualizar título do jogo
                const gameTitle = document.getElementById('gameTitle');
                if (gameTitle) gameTitle.textContent = settings.gameName;
                
                // Aplicar cores
                document.documentElement.style.setProperty('--primary-color', settings.primaryColor);
                document.documentElement.style.setProperty('--secondary-color', settings.secondaryColor);
            }

            function previewAsset(input) {
                if (input.files && input.files[0]) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const preview = document.getElementById('assetPreview');
                        preview.src = e.target.result;
                        preview.style.display = 'block';
                    };
                    reader.readAsDataURL(input.files[0]);
                }
            }

            function uploadAsset() {
                const fileInput = document.getElementById('assetUpload');
                const assetName = document.getElementById('assetName').value;
                const assetType = document.getElementById('assetType').value;
                
                if (!fileInput.files[0] || !assetName) {
                    gameEditor.showNotification('Selecione um arquivo e digite um nome!', 'error');
                    return;
                }
                
                // Aqui você implementaria o upload real
                gameEditor.showNotification(`Asset "${assetName}" carregado como ${assetType}!`, 'success');
            }

            function previewAllAssets() {
                gameEditor.showNotification('Visualização de assets em desenvolvimento!', 'warning');
            }

            function saveAll() {
                saveCharacter();
                saveEnemy();
                saveEconomy();
                saveMission();
                saveSettings();
                gameEditor.showNotification('Todas as configurações foram salvas!', 'success');
            }

            function loadConfig() {
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = '.json';
                input.onchange = function(e) {
                    const file = e.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            try {
                                const data = JSON.parse(e.target.result);
                                gameEditor.gameData = { ...gameEditor.gameData, ...data };
                                gameEditor.saveGameData();
                                gameEditor.showNotification('Configuração carregada com sucesso!', 'success');
                            } catch (error) {
                                gameEditor.showNotification('Erro ao carregar arquivo!', 'error');
                            }
                        };
                        reader.readAsText(file);
                    }
                };
                input.click();
            }

            function resetAll() {
                if (confirm('Tem certeza que deseja resetar todas as configurações?')) {
                    localStorage.removeItem('novaRemainsEditorData');
                    location.reload();
                }
            }

            function exportConfig() {
                const dataStr = JSON.stringify(gameEditor.gameData, null, 2);
                const dataBlob = new Blob([dataStr], {type: 'application/json'});
                const url = URL.createObjectURL(dataBlob);
                const link = document.createElement('a');
                link.href = url;
                link.download = 'nova-remains-config.json';
                link.click();
                URL.revokeObjectURL(url);
                gameEditor.showNotification('Configuração exportada!', 'success');
            }

            // Inicializar editor
            const gameEditor = new GameEditor();

            // Integração com sistema de combate existente
            function dispatchEnemyDefeated(enemyType) {
                const event = new CustomEvent('enemyDefeated', {
                    detail: { enemyType: enemyType }
                });
                document.dispatchEvent(event);
            }

            function dispatchItemCollected(itemType) {
                const event = new CustomEvent('itemCollected', {
                    detail: { itemType: itemType }
                });
                document.dispatchEvent(event);
            }

            // Interceptar derrota de inimigos no sistema existente
            const originalEnemyUpdate = Enemy.prototype.update;
            Enemy.prototype.update = function(deltaTime) {
                const result = originalEnemyUpdate.call(this, deltaTime);
                
                // Verificar se inimigo foi derrotado
                if (this.health <= 0 && !this.defeated) {
                    this.defeated = true;
                    dispatchEnemyDefeated(this.type || 'enemy');
                }
                
                return result;
            };

            // Interceptar coleta de itens (se existir)
            if (typeof Item !== 'undefined') {
                const originalItemCollect = Item.prototype.collect;
                Item.prototype.collect = function() {
                    const result = originalItemCollect.call(this);
                    dispatchItemCollected(this.type || 'item');
                    return result;
                };
            }
    </script>

    <!-- Modais Modernos -->
    <!-- Modal de Seleção de Heróis -->
    <div class="modal-overlay" id="heroModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Select Your Star Hunter</h2>
                <button class="close-btn" onclick="closeModal('heroModal')">×</button>
            </div>
            
            <div class="heroes-grid">
                <div class="hero-card" onclick="selectHero(this, 'nova-striker')">
                    <div class="hero-avatar">🌟</div>
                    <h3 class="hero-name">Nova Striker</h3>
                    <p class="hero-class">Assault • Plasma</p>
                    <div class="hero-stats">
                        <div class="stat-row">
                            <span>Attack</span>
                            <span>95</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill attack" style="width: 95%"></div>
                        </div>
                        <div class="stat-row">
                            <span>Defense</span>
                            <span>70</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill defense" style="width: 70%"></div>
                        </div>
                        <div class="stat-row">
                            <span>Speed</span>
                            <span>85</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill speed" style="width: 85%"></div>
                        </div>
                    </div>
                </div>

                <div class="hero-card" onclick="selectHero(this, 'void-guardian')">
                    <div class="hero-avatar">🌑</div>
                    <h3 class="hero-name">Void Guardian</h3>
                    <p class="hero-class">Tank • Dark Matter</p>
                    <div class="hero-stats">
                        <div class="stat-row">
                            <span>Attack</span>
                            <span>70</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill attack" style="width: 70%"></div>
                        </div>
                        <div class="stat-row">
                            <span>Defense</span>
                            <span>95</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill defense" style="width: 95%"></div>
                        </div>
                        <div class="stat-row">
                            <span>Speed</span>
                            <span>60</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill speed" style="width: 60%"></div>
                        </div>
                    </div>
                </div>

                <div class="hero-card" onclick="selectHero(this, 'star-weaver')">
                    <div class="hero-avatar">✨</div>
                    <h3 class="hero-name">Star Weaver</h3>
                    <p class="hero-class">Mage • Cosmic</p>
                    <div class="hero-stats">
                        <div class="stat-row">
                            <span>Attack</span>
                            <span>90</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill attack" style="width: 90%"></div>
                        </div>
                        <div class="stat-row">
                            <span>Defense</span>
                            <span>65</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill defense" style="width: 65%"></div>
                        </div>
                        <div class="stat-row">
                            <span>Speed</span>
                            <span>80</span>
                        </div>
                        <div class="stat-bar">
                            <div class="stat-fill speed" style="width: 80%"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button class="btn-modern btn-primary" onclick="deployHero()">Deploy Hunter</button>
            </div>
        </div>
    </div>

    <!-- Modal de Missões -->
    <div class="modal-overlay" id="missionModal">
        <div class="modal-content" style="max-width: 900px; max-height: 80vh; overflow-y: auto;">
            <div class="modal-header">
                <h2 class="modal-title">🗺️ Galactic Mission Map</h2>
                <button class="close-btn" onclick="closeModal('missionModal')">×</button>
            </div>
            <div class="mission-content">
                <div class="mission-tabs">
                    <button class="mission-tab active" onclick="showMissionTab('village')">🏘️ Vila</button>
                    <button class="mission-tab" onclick="showMissionTab('forest')">🌲 Floresta</button>
                    <button class="mission-tab" onclick="showMissionTab('cave')">⛰️ Caverna</button>
                    <button class="mission-tab" onclick="showMissionTab('tower')">🏰 Torre</button>
                    <button class="mission-tab" onclick="showMissionTab('dungeon')">🗡️ Masmorra</button>
                </div>
                
                <div id="missionList" class="mission-list">
                    <!-- Missões serão carregadas dinamicamente -->
                </div>
            </div>
        </div>
    </div>

    <!-- Modal da Loja -->
    <div class="modal-overlay" id="shopModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Galactic Arsenal</h2>
                <button class="close-btn" onclick="closeModal('shopModal')">×</button>
            </div>
            <div style="text-align: center; padding: 2rem;">
                <h3 style="color: #10b981; margin-bottom: 1rem;">Sistema de Loja</h3>
                <p style="color: #94a3b8;">Em desenvolvimento...</p>
            </div>
        </div>
    </div>

    <!-- Modal de Inventário -->
    <div class="modal-overlay" id="inventoryModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Inventory</h2>
                <button class="close-btn" onclick="closeModal('inventoryModal')">×</button>
            </div>
            <div style="text-align: center; padding: 2rem;">
                <h3 style="color: #a855f7; margin-bottom: 1rem;">Sistema de Inventário</h3>
                <p style="color: #94a3b8;">Em desenvolvimento...</p>
            </div>
        </div>
    </div>

    <!-- Modal de Configurações -->
    <div class="modal-overlay" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">Game Settings</h2>
                <button class="close-btn" onclick="closeModal('settingsModal')">×</button>
            </div>
            <div style="text-align: center; padding: 2rem;">
                <h3 style="color: #6b7280; margin-bottom: 1rem;">Configurações</h3>
                <p style="color: #94a3b8;">Em desenvolvimento...</p>
            </div>
        </div>
    </div>

    <!-- JavaScript para Interface Moderna -->
    <script>
        // Sistema de Estrelas Animadas Global
        class GlobalStarfield {
            constructor() {
                this.canvas = document.getElementById('globalStarfieldCanvas');
                this.ctx = this.canvas.getContext('2d');
                this.stars = [];
                this.numStars = 600;
                this.speed = 0.3;
                
                this.resize();
                this.createStars();
                this.animate();
                
                window.addEventListener('resize', () => this.resize());
            }
            
            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }
            
            createStars() {
                for (let i = 0; i < this.numStars; i++) {
                    this.stars.push({
                        x: Math.random() * this.canvas.width - this.canvas.width / 2,
                        y: Math.random() * this.canvas.height - this.canvas.height / 2,
                        z: Math.random() * 1000,
                        prevX: 0,
                        prevY: 0,
                        size: Math.random() * 2 + 0.5
                    });
                }
            }
            
            animate() {
                this.ctx.fillStyle = 'rgba(15, 15, 35, 0.05)';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                const centerX = this.canvas.width / 2;
                const centerY = this.canvas.height / 2;
                
                this.stars.forEach(star => {
                    star.prevX = star.x / star.z * 100 + centerX;
                    star.prevY = star.y / star.z * 100 + centerY;
                    
                    star.z -= this.speed;
                    
                    if (star.z <= 0) {
                        star.x = Math.random() * this.canvas.width - this.canvas.width / 2;
                        star.y = Math.random() * this.canvas.height - this.canvas.height / 2;
                        star.z = 1000;
                    }
                    
                    const x = star.x / star.z * 100 + centerX;
                    const y = star.y / star.z * 100 + centerY;
                    
                    const opacity = 1 - star.z / 1000;
                    const size = star.size * (1 - star.z / 1000);
                    
                    // Desenhar estrela como círculo
                    this.ctx.fillStyle = `rgba(255, 255, 255, ${opacity * 0.8})`;
                    this.ctx.beginPath();
                    this.ctx.arc(x, y, size, 0, Math.PI * 2);
                    this.ctx.fill();
                    
                    // Adicionar brilho
                    if (opacity > 0.5) {
                        this.ctx.fillStyle = `rgba(255, 255, 255, ${opacity * 0.3})`;
                        this.ctx.beginPath();
                        this.ctx.arc(x, y, size * 2, 0, Math.PI * 2);
                        this.ctx.fill();
                    }
                });
                
                requestAnimationFrame(() => this.animate());
            }
        }

        // Sistema de Estrelas para o Jogo
        class GameStarfield {
            constructor() {
                this.canvas = document.getElementById('starfieldCanvas');
                if (!this.canvas) return;
                
                this.ctx = this.canvas.getContext('2d');
                this.stars = [];
                this.numStars = 400;
                this.speed = 0.5;
                
                this.resize();
                this.createStars();
                this.animate();
                
                window.addEventListener('resize', () => this.resize());
            }
            
            resize() {
                if (!this.canvas) return;
                this.canvas.width = this.canvas.offsetWidth;
                this.canvas.height = this.canvas.offsetHeight;
            }
            
            createStars() {
                for (let i = 0; i < this.numStars; i++) {
                    this.stars.push({
                        x: Math.random() * this.canvas.width - this.canvas.width / 2,
                        y: Math.random() * this.canvas.height - this.canvas.height / 2,
                        z: Math.random() * 1000,
                        prevX: 0,
                        prevY: 0
                    });
                }
            }
            
            animate() {
                if (!this.canvas) return;
                
                this.ctx.fillStyle = 'rgba(15, 15, 35, 0.1)';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);
                
                const centerX = this.canvas.width / 2;
                const centerY = this.canvas.height / 2;
                
                this.stars.forEach(star => {
                    star.prevX = star.x / star.z * 100 + centerX;
                    star.prevY = star.y / star.z * 100 + centerY;
                    
                    star.z -= this.speed;
                    
                    if (star.z <= 0) {
                        star.x = Math.random() * this.canvas.width - this.canvas.width / 2;
                        star.y = Math.random() * this.canvas.height - this.canvas.height / 2;
                        star.z = 1000;
                    }
                    
                    const x = star.x / star.z * 100 + centerX;
                    const y = star.y / star.z * 100 + centerY;
                    
                    this.ctx.strokeStyle = `rgba(255, 255, 255, ${1 - star.z / 1000})`;
                    this.ctx.lineWidth = 2;
                    this.ctx.beginPath();
                    this.ctx.moveTo(star.prevX, star.prevY);
                    this.ctx.lineTo(x, y);
                    this.ctx.stroke();
                });
                
                requestAnimationFrame(() => this.animate());
            }
        }
        
        // Inicializar sistemas de estrelas
        new GlobalStarfield();
        new GameStarfield();
        
        // Sistema de Modais
        function openModal(modalId) {
            document.getElementById(modalId).style.display = 'flex';
        }
        
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }
        
        // Fechar modal clicando fora
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('modal-overlay')) {
                e.target.style.display = 'none';
            }
        });
        
        // Sistema de Missões
        let currentMissionTab = 'village';
        let missionSystem = null;
        
        function initializeMissionSystem() {
            if (typeof MissionSystem !== 'undefined') {
                missionSystem = new MissionSystem();
                loadMissions('village');
                console.log('✅ Sistema de missões inicializado');
            } else {
                console.warn('⚠️ MissionSystem não encontrado');
            }
        }
        
        function showMissionTab(location) {
            currentMissionTab = location;
            
            // Atualizar tabs ativas
            document.querySelectorAll('.mission-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // Carregar missões da localização
            loadMissions(location);
        }
        
        function loadMissions(location) {
            const missionList = document.getElementById('missionList');
            if (!missionList || !missionSystem) return;
            
            const missions = Array.from(missionSystem.missions.values())
                .filter(mission => mission.location === location);
            
            missionList.innerHTML = '';
            
            missions.forEach(mission => {
                const missionCard = createMissionCard(mission);
                missionList.appendChild(missionCard);
            });
            
            if (missions.length === 0) {
                missionList.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: #94a3b8;">
                        <h3>Nenhuma missão disponível</h3>
                        <p>Esta localização ainda não possui missões.</p>
                    </div>
                `;
            }
        }
        
        // Função para alternar entre abas do mapa mundi
        function switchMapTab(tabName) {
            // Remover classe active de todas as abas
            document.querySelectorAll('.map-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Esconder todo conteúdo das abas
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Ativar aba selecionada
            const selectedTab = document.querySelector(`[data-tab="${tabName}"]`);
            const selectedContent = document.getElementById(`${tabName}Tab`);
            
            if (selectedTab && selectedContent) {
                selectedTab.classList.add('active');
                selectedContent.classList.add('active');
                
                // Carregar conteúdo específico da aba se necessário
                switch(tabName) {
                    case 'inventory':
                        if (window.InventorySystem) {
                            window.InventorySystem.renderInventory();
                        }
                        break;
                    case 'shop':
                        if (window.ShopSystem) {
                            window.ShopSystem.renderItems();
                        }
                        break;
                    case 'missions':
                        loadMissions('village');
                        break;
                }
            }
        }
        
        // Tornar função global
        window.switchMapTab = switchMapTab;
        
        // Função para mostrar/ocultar UI do jogo
        function toggleGameUI(show) {
            const ui = document.getElementById('ui');
            if (ui) {
                ui.style.display = show ? 'flex' : 'none';
            }
        }
        
        // Função para iniciar missão (mostrar UI)
        function startMission(missionId) {
            // Mostrar UI do jogo durante a missão
            toggleGameUI(true);
            
            // Aqui você pode adicionar a lógica para iniciar a missão
            console.log('Iniciando missão:', missionId);
            
            // Exemplo de como ocultar outras telas e mostrar o jogo
            hideAllScreens();
            const gameContainer = document.getElementById('gameContainer');
            if (gameContainer) {
                gameContainer.style.display = 'block';
            }
        }
        
        // Função para voltar ao mapa (ocultar UI)
        function returnToMap() {
            // Ocultar UI do jogo
            toggleGameUI(false);
            
            // Voltar ao mapa mundi
            hideAllScreens();
            const worldMap = document.getElementById('worldMap');
            if (worldMap) {
                worldMap.style.display = 'flex';
            }
        }
        
        // Tornar funções globais
        window.toggleGameUI = toggleGameUI;
        window.startMission = startMission;
        window.returnToMap = returnToMap;
        
        function createMissionCard(mission) {
            const card = document.createElement('div');
            card.className = `mission-card difficulty-${mission.difficulty}`;
            
            const difficultyColors = {
                easy: '#22c55e',
                medium: '#f59e0b', 
                hard: '#ef4444',
                extreme: '#8b5cf6'
            };
            
            const difficultyNames = {
                easy: 'Fácil',
                medium: 'Médio',
                hard: 'Difícil', 
                extreme: 'Extremo'
            };
            
            card.innerHTML = `
                <div class="mission-header">
                    <div class="mission-icon">${mission.icon}</div>
                    <div class="mission-info">
                        <h3>${mission.name}</h3>
                        <div class="mission-level">Nível ${mission.level} • ${difficultyNames[mission.difficulty]}</div>
                    </div>
                </div>
                
                <div class="mission-description">
                    ${mission.description}
                </div>
                
                <div class="mission-details">
                    <div class="mission-detail">
                        <span class="mission-detail-icon">👥</span>
                        <span>Máx. ${mission.maxPlayers} jogadores</span>
                    </div>
                    <div class="mission-detail">
                        <span class="mission-detail-icon">📍</span>
                        <span>${mission.location}</span>
                    </div>
                </div>
                
                <div class="mission-rewards">
                    <h4>🎁 Recompensas</h4>
                    <div class="mission-reward">
                        <span>⭐</span>
                        <span>${mission.rewards.exp} EXP</span>
                    </div>
                    <div class="mission-reward">
                        <span>💰</span>
                        <span>${mission.rewards.gold} Ouro</span>
                    </div>
                </div>
                
                <div class="mission-actions">
                    <button class="mission-btn primary" onclick="startMission('${mission.id}')">
                        🚀 Iniciar Missão
                    </button>
                    <button class="mission-btn secondary" onclick="viewMissionDetails('${mission.id}')">
                        📋 Detalhes
                    </button>
                </div>
            `;
            
            return card;
        }
        
        function startMission(missionId) {
            if (!missionSystem) {
                console.warn('⚠️ Sistema de missões não inicializado');
                return;
            }
            
            const mission = missionSystem.getMission(missionId);
            if (!mission) {
                console.warn('⚠️ Missão não encontrada:', missionId);
                return;
            }
            
            console.log('🚀 Iniciando missão:', mission.name);
            
            // Aqui você pode implementar a lógica para iniciar a missão
            // Por exemplo, fechar o modal e iniciar o jogo com a missão selecionada
            closeModal('missionModal');
            
            // Mostrar mensagem de sucesso
            showNotification(`Missão "${mission.name}" iniciada!`, 'success');
        }
        
        function viewMissionDetails(missionId) {
            if (!missionSystem) {
                console.warn('⚠️ Sistema de missões não inicializado');
                return;
            }
            
            const mission = missionSystem.getMission(missionId);
            if (!mission) {
                console.warn('⚠️ Missão não encontrada:', missionId);
                return;
            }
            
            // Aqui você pode implementar um modal de detalhes da missão
            console.log('📋 Visualizando detalhes da missão:', mission.name);
            showNotification(`Detalhes da missão "${mission.name}"`, 'info');
        }
        
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? '#22c55e' : type === 'error' ? '#ef4444' : '#3b82f6'};
                color: white;
                padding: 15px 20px;
                border-radius: 8px;
                z-index: 10000;
                font-weight: 500;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                transform: translateX(100%);
                transition: transform 0.3s ease;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            // Animar entrada
            setTimeout(() => {
                notification.style.transform = 'translateX(0)';
            }, 100);
            
            // Remover após 3 segundos
            setTimeout(() => {
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => {
                    if (notification.parentNode) {
                        notification.parentNode.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
        
        // Sistema de Seleção de Heróis
        let selectedHero = null;
        let currentGameState = 'mainMenu'; // mainMenu, characterSelection, worldMap, mission
        
        // Função para iniciar o jogo
        function startGame() {
            hideAllScreens();
            document.getElementById('characterSelectionScreen').style.display = 'flex';
            currentGameState = 'characterSelection';
            console.log('🎮 Iniciando seleção de personagem');
        }
        
        // Função para voltar ao menu principal
        function goBackToMainMenu() {
            hideAllScreens();
            document.getElementById('mainMenu').style.display = 'block';
            currentGameState = 'mainMenu';
            selectedHero = null;
            console.log('🏠 Voltando ao menu principal');
        }
        
        // Função para voltar à seleção de personagem
        function goBackToCharacterSelection() {
            hideAllScreens();
            document.getElementById('characterSelectionScreen').style.display = 'flex';
            currentGameState = 'characterSelection';
            console.log('👤 Voltando à seleção de personagem');
        }
        
        // Função para esconder todas as telas
        function hideAllScreens() {
            document.getElementById('mainMenu').style.display = 'none';
            document.getElementById('characterSelectionScreen').style.display = 'none';
            document.getElementById('worldMap').style.display = 'none';
            document.getElementById('gameContainer').style.display = 'none';
        }
        
        // Função para selecionar herói
        function selectHero(card, heroId) {
            // Remover seleção anterior
            document.querySelectorAll('.hero-card').forEach(c => c.classList.remove('selected'));
            
            // Selecionar novo herói
            card.classList.add('selected');
            selectedHero = heroId;
            
            // Habilitar botão de confirmação
            document.getElementById('confirmHeroBtn').disabled = false;
            
            console.log('👤 Herói selecionado:', heroId);
        }
        
        // Função para confirmar seleção de herói
        function confirmHeroSelection() {
            if (!selectedHero) {
                showNotification('Selecione um herói primeiro!', 'error');
                return;
            }
            
            hideAllScreens();
            document.getElementById('worldMap').style.display = 'flex';
            currentGameState = 'worldMap';
            
            // Atualizar informações do herói no mapa
            updateHeroInfoOnMap();
            
            showNotification(`Herói ${selectedHero.toUpperCase()} selecionado!`, 'success');
            console.log('✅ Herói confirmado:', selectedHero);
        }
        
        // Função para atualizar informações do herói no mapa
        function updateHeroInfoOnMap() {
            const heroInfo = document.getElementById('selectedHeroInfo');
            const heroData = {
                juno: { name: 'JUNO', icon: '⚔️', health: 100, attack: 25, defense: 15 },
                atlas: { name: 'ATLAS', icon: '🛡️', health: 120, attack: 20, defense: 20 },
                vega: { name: 'VEGA', icon: '🏹', health: 80, attack: 30, defense: 10 },
                kai: { name: 'KAI', icon: '⚡', health: 110, attack: 28, defense: 12 }
            };
            
            const hero = heroData[selectedHero];
            if (hero) {
                heroInfo.innerHTML = `
                    <div class="hero-avatar">${hero.icon}</div>
                    <div class="hero-details">
                        <div class="hero-name">${hero.name}</div>
                        <div class="hero-level">Nível 1</div>
                    </div>
                `;
                
                // Atualizar estatísticas
                document.querySelector('.stat-item:nth-child(1) .stat-value').textContent = `${hero.health}/${hero.health}`;
                document.querySelector('.stat-item:nth-child(2) .stat-value').textContent = hero.attack;
                document.querySelector('.stat-item:nth-child(3) .stat-value').textContent = hero.defense;
            }
        }
        
        // Função para abrir missões de uma localização
        function openLocationMissions(location) {
            if (!selectedHero) {
                showNotification('Selecione um herói primeiro!', 'error');
                return;
            }
            
            // Fechar modal de missões se estiver aberto
            closeModal('missionModal');
            
            // Abrir modal de missões com a localização específica
            openModal('missionModal');
            
            // Ativar a aba da localização
            setTimeout(() => {
                const tab = document.querySelector(`.mission-tab[onclick*="${location}"]`);
                if (tab) {
                    tab.click();
                }
            }, 100);
            
            console.log('🗺️ Abrindo missões da localização:', location);
        }
        
        function selectHero(card, heroId) {
            // Remover seleção anterior
            document.querySelectorAll('.hero-card').forEach(c => c.classList.remove('selected'));
            
            // Selecionar novo herói
            card.classList.add('selected');
            selectedHero = heroId;
        }
        
        function deployHero() {
            if (selectedHero) {
                alert(`Deploying ${selectedHero}...`);
                closeModal('heroModal');
            } else {
                alert('Please select a hero first!');
            }
        }
        
        // Sistema de Combate
        function startCombat() {
            alert('Starting Combat Mode...');
        }
        
        // ========================================
        // SISTEMA DE MISSÕES - JAVASCRIPT
        // ========================================
        
        let missionGameState = {
            player: {
                x: 50, y: 350,
                vx: 0, vy: 0,
                width: 40, height: 50,
                hp: 100, maxHp: 100,
                mp: 100, maxMp: 100,
                speed: 5, jumpPower: 15,
                lastMoveDirection: 'right',
                isJumping: false,
                isAttacking: false,
                attackCooldown: false,
                isDashing: false,
                dashCooldown: false,
                skillCooldown: false,
                isInvincible: false,
            },
            enemies: [],
            keys: {},
            gravity: 0.8,
            mission: {
                currentWave: 0,
                totalWaves: 2,
                isBossWave: false,
                status: 'pending',
                currentMission: null
            },
            gameLoopId: null,
        };
        
        // Configurações de missões
        const missionConfigs = {
            tutorial: {
                name: "Tutorial Inicial",
                description: "Aprenda os controles básicos do jogo",
                waves: 1,
                enemiesPerWave: 2,
                hasBoss: false,
                rewards: { gold: 100, exp: 50 }
            },
            first_quest: {
                name: "Primeira Busca",
                description: "Encontre Fragmentos de Estrela perdidos",
                waves: 2,
                enemiesPerWave: 3,
                hasBoss: false,
                rewards: { gold: 200, exp: 100 }
            },
            void_exploration: {
                name: "Exploração do Vazio",
                description: "Derrote Filhos do Vazio e colete fragmentos",
                waves: 3,
                enemiesPerWave: 4,
                hasBoss: false,
                rewards: { gold: 500, exp: 250 }
            },
            void_boss: {
                name: "Chefe do Vazio",
                description: "Enfrente o Guardião das Sombras",
                waves: 2,
                enemiesPerWave: 3,
                hasBoss: true,
                rewards: { gold: 1000, exp: 500, item: "Item Raro" }
            }
        };
        
        // Event listeners para missões
        document.addEventListener('DOMContentLoaded', () => {
            // Botões de missão
            document.querySelectorAll('.mission-select-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const missionId = e.target.getAttribute('data-mission');
                    startMission(missionId);
                });
            });
            
            // Botões do jogo de missão
            const startButton = document.getElementById('start-button');
            const restartButton = document.getElementById('restart-button');
            const backToMissions = document.getElementById('back-to-missions');
            
            if (startButton) startButton.addEventListener('click', startMissionGame);
            if (restartButton) restartButton.addEventListener('click', startMissionGame);
            if (backToMissions) backToMissions.addEventListener('click', backToMissionsList);
            
            // Controles do jogo
            document.addEventListener('keydown', (e) => {
                if (missionGameState.mission.status !== 'playing') return;
                
                missionGameState.keys[e.key.toLowerCase()] = true;
                
                if (e.key === 'ArrowUp' && !missionGameState.player.isJumping) {
                    missionGameState.player.vy = -missionGameState.player.jumpPower;
                    missionGameState.player.isJumping = true;
                }
                if (e.key.toLowerCase() === 'z' && !missionGameState.player.attackCooldown) {
                    playerAttack();
                }
                if (e.key.toLowerCase() === 'a' && !missionGameState.player.skillCooldown) {
                    playerSpecialAttack();
                }
                if (e.key === 'Shift' && !missionGameState.player.dashCooldown) {
                    playerDash();
                }
            });
            
            document.addEventListener('keyup', (e) => {
                missionGameState.keys[e.key.toLowerCase()] = false;
            });
        });
        
        function startMission(missionId) {
            const config = missionConfigs[missionId];
            if (!config) return;
            
            missionGameState.mission.currentMission = missionId;
            missionGameState.mission.totalWaves = config.waves;
            missionGameState.mission.isBossWave = config.hasBoss;
            
            // Mostrar tela de missão
            document.getElementById('missionsMenu').style.display = 'none';
            document.getElementById('missionGameContainer').style.display = 'block';
            
            // Atualizar descrição
            const description = document.getElementById('mission-description');
            if (description) {
                description.textContent = config.description;
            }
        }
        
        function startMissionGame() {
            const config = missionConfigs[missionGameState.mission.currentMission];
            if (!config) return;
            
            // Reset do jogador
            missionGameState.player.hp = missionGameState.player.maxHp;
            missionGameState.player.mp = missionGameState.player.maxMp;
            missionGameState.player.x = 50;
            missionGameState.player.y = 350;
            missionGameState.mission.currentWave = 0;
            missionGameState.mission.isBossWave = config.hasBoss;
            
            // Limpar inimigos
            missionGameState.enemies.forEach(e => {
                const element = document.getElementById('game-world');
                if (element && element.contains(e.element)) {
                    element.removeChild(e.element);
                }
            });
            missionGameState.enemies = [];
            
            // Esconder telas
            document.getElementById('game-over-screen').style.display = 'none';
            document.getElementById('start-screen').style.display = 'none';
            
            // Iniciar jogo
            missionGameState.mission.status = 'playing';
            startNextWave();
            if (missionGameState.gameLoopId) cancelAnimationFrame(missionGameState.gameLoopId);
            updateMissionGame();
        }
        
        function backToMissionsList() {
            document.getElementById('missionGameContainer').style.display = 'none';
            document.getElementById('missionsMenu').style.display = 'block';
            missionGameState.mission.status = 'pending';
            if (missionGameState.gameLoopId) cancelAnimationFrame(missionGameState.gameLoopId);
        }
        
        function startNextWave() {
            const config = missionConfigs[missionGameState.mission.currentMission];
            missionGameState.mission.currentWave++;
            
            if (missionGameState.mission.currentWave > missionGameState.mission.totalWaves) {
                if (config.hasBoss) {
                    document.getElementById('mission-status').innerText = "CHEFE FINAL!";
                    spawnEnemy('boss');
                } else {
                    winMission();
                }
            } else {
                document.getElementById('mission-status').innerText = `Onda ${missionGameState.mission.currentWave}/${missionGameState.mission.totalWaves}`;
                for(let i = 0; i < config.enemiesPerWave; i++) {
                    spawnEnemy();
                }
            }
        }
        
        function spawnEnemy(type = 'normal') {
            const enemy = {
                x: Math.random() > 0.5 ? 950 : 0,
                y: 360,
                vx: 2,
                element: document.createElement('div'),
            };

            if (type === 'boss') {
                enemy.hp = 300;
                enemy.maxHp = 300;
                enemy.width = 80;
                enemy.height = 80;
                enemy.className = 'boss';
                enemy.y = 320;
            } else {
                enemy.hp = 50;
                enemy.maxHp = 50;
                enemy.width = 40;
                enemy.height = 40;
                enemy.className = 'enemy';
            }

            enemy.element.className = enemy.className;
            enemy.element.style.width = `${enemy.width}px`;
            enemy.element.style.height = `${enemy.height}px`;

            const enemyHealthBar = document.createElement('div');
            enemyHealthBar.className = 'enemy-health-bar';
            enemyHealthBar.style.width = '100%';
            enemyHealthBar.style.top = '-10px';
            enemy.element.appendChild(enemyHealthBar);
            
            document.getElementById('game-world').appendChild(enemy.element);
            missionGameState.enemies.push(enemy);
        }
        
        function playerAttack() {
            if(missionGameState.mission.status !== 'playing') return;
            
            missionGameState.player.isAttacking = true;
            missionGameState.player.attackCooldown = true;
            
            const hitbox = document.createElement('div');
            hitbox.className = 'attack-hitbox';
            const hitboxWidth = 60;
            const hitboxHeight = missionGameState.player.height;
            
            const direction = missionGameState.player.lastMoveDirection === 'right' ? 1 : -1;
            const hitboxX = direction === 1 
                ? missionGameState.player.x + missionGameState.player.width 
                : missionGameState.player.x - hitboxWidth;
            const hitboxY = missionGameState.player.y;

            hitbox.style.width = `${hitboxWidth}px`;
            hitbox.style.height = `${hitboxHeight}px`;
            hitbox.style.left = `${hitboxX}px`;
            hitbox.style.top = `${hitboxY}px`;
            
            document.getElementById('game-world').appendChild(hitbox);

            missionGameState.enemies.forEach(enemy => {
                if (checkCollision({x: hitboxX, y: hitboxY, width: hitboxWidth, height: hitboxHeight}, enemy)) {
                    takeDamage(enemy, 25);
                }
            });

            setTimeout(() => {
                const gameWorld = document.getElementById('game-world');
                if(gameWorld && gameWorld.contains(hitbox)) gameWorld.removeChild(hitbox);
                missionGameState.player.isAttacking = false;
            }, 150);

            setTimeout(() => {
                missionGameState.player.attackCooldown = false;
            }, 500);
        }
        
        function playerSpecialAttack() {
            if (missionGameState.mission.status !== 'playing') return;
            const skillCost = 30;

            if (missionGameState.player.mp < skillCost) return;
            
            missionGameState.player.mp -= skillCost;
            missionGameState.player.skillCooldown = true;

            const hitbox = document.createElement('div');
            hitbox.className = 'special-attack-hitbox';
            const hitboxWidth = 120;
            const hitboxHeight = 70;
            
            const direction = missionGameState.player.lastMoveDirection === 'right' ? 1 : -1;
            const hitboxX = direction === 1 
                ? missionGameState.player.x + missionGameState.player.width 
                : missionGameState.player.x - hitboxWidth;
            const hitboxY = missionGameState.player.y + (missionGameState.player.height - hitboxHeight) / 2;

            hitbox.style.width = `${hitboxWidth}px`;
            hitbox.style.height = `${hitboxHeight}px`;
            hitbox.style.left = `${hitboxX}px`;
            hitbox.style.top = `${hitboxY}px`;
            
            document.getElementById('game-world').appendChild(hitbox);

            missionGameState.enemies.forEach(enemy => {
                if (checkCollision({x: hitboxX, y: hitboxY, width: hitboxWidth, height: hitboxHeight}, enemy)) {
                    takeDamage(enemy, 75);
                }
            });

            setTimeout(() => {
                const gameWorld = document.getElementById('game-world');
                if(gameWorld && gameWorld.contains(hitbox)) gameWorld.removeChild(hitbox);
            }, 300);

            setTimeout(() => {
                missionGameState.player.skillCooldown = false;
            }, 1500);
        }
        
        function playerDash() {
            if (missionGameState.mission.status !== 'playing' || missionGameState.player.isDashing) return;

            missionGameState.player.isDashing = true;
            missionGameState.player.dashCooldown = true;
            document.getElementById('player').style.opacity = '0.5';

            const dashSpeed = 200;
            const dashDirection = missionGameState.player.lastMoveDirection === 'right' ? 1 : -1;
            
            missionGameState.player.x += dashSpeed * dashDirection;

            setTimeout(() => {
                missionGameState.player.isDashing = false;
                document.getElementById('player').style.opacity = '1';
            }, 150);

            setTimeout(() => {
                missionGameState.player.dashCooldown = false;
            }, 800);
        }
        
        function takeDamage(target, amount) {
            target.hp -= amount;
            if (target.element.querySelector('.enemy-health-bar')) {
                const healthPercentage = Math.max(0, (target.hp / target.maxHp) * 100);
                target.element.querySelector('.enemy-health-bar').style.width = `${healthPercentage}%`;
            }
        }
        
        function damagePlayer(amount) {
            if (missionGameState.player.isInvincible || missionGameState.player.isDashing) return;
            
            missionGameState.player.hp -= amount;
            missionGameState.player.isInvincible = true;
            document.getElementById('player').style.opacity = '0.5';
            
            setTimeout(() => {
                missionGameState.player.isInvincible = false;
                document.getElementById('player').style.opacity = '1';
            }, 1000);
        }
        
        function checkCollision(rect1, rect2) {
            return (
                rect1.x < rect2.x + rect2.width &&
                rect1.x + rect1.width > rect2.x &&
                rect1.y < rect2.y + rect2.height &&
                rect1.y + rect1.height > rect2.y
            );
        }
        
        function updateMissionGame() {
            if (missionGameState.mission.status !== 'playing') return;

            // Lógica do Jogador
            if (!missionGameState.player.isDashing) {
                if (missionGameState.keys['arrowleft']) {
                    missionGameState.player.x -= missionGameState.player.speed;
                    missionGameState.player.lastMoveDirection = 'left';
                }
                if (missionGameState.keys['arrowright']) {
                    missionGameState.player.x += missionGameState.player.speed;
                    missionGameState.player.lastMoveDirection = 'right';
                }
            }
            
            // Regeneração de Mana
            if (missionGameState.player.mp < missionGameState.player.maxMp) {
                missionGameState.player.mp += 0.1;
            }

            missionGameState.player.vy += missionGameState.gravity;
            missionGameState.player.y += missionGameState.player.vy;
            
            const groundLevel = 400 - missionGameState.player.height;
            if (missionGameState.player.y >= groundLevel) {
                missionGameState.player.y = groundLevel;
                missionGameState.player.vy = 0;
                missionGameState.player.isJumping = false;
            }
            
            if (missionGameState.player.x < 0) missionGameState.player.x = 0;
            if (missionGameState.player.x > 1000 - missionGameState.player.width) missionGameState.player.x = 1000 - missionGameState.player.width;

            // Lógica dos Inimigos
            missionGameState.enemies.forEach(enemy => {
                if(enemy.x < missionGameState.player.x) {
                    enemy.x += enemy.vx;
                } else {
                    enemy.x -= enemy.vx;
                }
                if (checkCollision(missionGameState.player, enemy)) {
                    damagePlayer(10);
                }
            });

            const aliveEnemies = [];
            missionGameState.enemies.forEach(enemy => {
                if (enemy.hp > 0) {
                    aliveEnemies.push(enemy);
                } else {
                    const gameWorld = document.getElementById('game-world');
                    if(gameWorld && gameWorld.contains(enemy.element)) gameWorld.removeChild(enemy.element);
                }
            });
            missionGameState.enemies = aliveEnemies;

            if (missionGameState.enemies.length === 0) {
                const config = missionConfigs[missionGameState.mission.currentMission];
                if (missionGameState.mission.isBossWave || !config.hasBoss) {
                    winMission();
                } else {
                    startNextWave();
                }
            }

            if(missionGameState.player.hp <= 0) {
                gameOverMission();
            }

            // Atualizações Visuais
            document.getElementById('player').style.left = `${missionGameState.player.x}px`;
            document.getElementById('player').style.top = `${missionGameState.player.y}px`;
            missionGameState.enemies.forEach(enemy => {
                enemy.element.style.left = `${enemy.x}px`;
                enemy.element.style.top = `${enemy.y}px`;
            });
            
            const healthPercentage = Math.max(0, (missionGameState.player.hp / missionGameState.player.maxHp) * 100);
            document.getElementById('player-health-bar').style.width = `${healthPercentage}%`;
            
            const manaPercentage = Math.max(0, (missionGameState.player.mp / missionGameState.player.maxMp) * 100);
            document.getElementById('player-mana-bar').style.width = `${manaPercentage}%`;

            missionGameState.gameLoopId = requestAnimationFrame(updateMissionGame);
        }
        
        function gameOverMission() {
            missionGameState.mission.status = 'gameover';
            cancelAnimationFrame(missionGameState.gameLoopId);
            document.getElementById('end-game-title').innerText = "Game Over";
            document.getElementById('end-game-subtitle').innerText = "Os monstros venceram desta vez...";
            document.getElementById('game-over-screen').style.display = 'flex';
        }
        
        function winMission() {
            missionGameState.mission.status = 'win';
            cancelAnimationFrame(missionGameState.gameLoopId);
            document.getElementById('end-game-title').innerText = "Vitória!";
            document.getElementById('end-game-subtitle').innerText = "Você completou a missão!";
            document.getElementById('game-over-screen').style.display = 'flex';
            
            // Dar recompensas
            const config = missionConfigs[missionGameState.mission.currentMission];
            if (config && config.rewards) {
                setTimeout(() => {
                    alert(`Recompensas recebidas:\n💰 ${config.rewards.gold} Ouro\n⭐ ${config.rewards.exp} EXP${config.rewards.item ? '\n🏆 ' + config.rewards.item : ''}`);
                }, 1000);
            }
        }
        
        // Teclas de atalho
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                // Fechar todos os modais
                document.querySelectorAll('.modal-overlay').forEach(modal => {
                    modal.style.display = 'none';
                });
            }
        });

        // ===== CORREÇÃO AUTOMÁTICA DE BUGS - NOVA REMAINS =====
        console.log('🔧 Iniciando correções automáticas...');

        // 1. DEFINIR CLASSES GLOBALMENTE
        function defineGlobalClasses() {
            console.log('📦 Definindo classes globalmente...');
            
            // Definir ShopSystem globalmente
            if (typeof ShopSystem !== 'undefined' && typeof window.ShopSystem === 'undefined') {
                window.ShopSystem = ShopSystem;
                console.log('✅ ShopSystem definido globalmente');
            }
            
            // Definir InventorySystem globalmente  
            if (typeof InventorySystem !== 'undefined' && typeof window.InventorySystem === 'undefined') {
                window.InventorySystem = InventorySystem;
                console.log('✅ InventorySystem definido globalmente');
            }
            
            // Definir MissionSystem globalmente
            if (typeof MissionSystem !== 'undefined' && typeof window.MissionSystem === 'undefined') {
                window.MissionSystem = MissionSystem;
                console.log('✅ MissionSystem definido globalmente');
            }
            
            // Definir LobbySystem globalmente
            if (typeof LobbySystem !== 'undefined' && typeof window.LobbySystem === 'undefined') {
                window.LobbySystem = LobbySystem;
                console.log('✅ LobbySystem definido globalmente');
            }
        }

        // 2. CORRIGIR GAME LOOP
        function fixGameLoop() {
            console.log('🎮 Corrigindo game loop...');
            
            if (window.game && typeof window.game.gameLoop === 'function') {
                // Reativar game loop se não estiver rodando
                if (!window.game.isRunning) {
                    window.game.isRunning = true;
                    window.game.gameLoop();
                    console.log('✅ Game loop reativado');
                }
            }
        }

        // 3. CORRIGIR SETUP DE IMAGENS DOS HERÓIS
        function fixHeroImageFallbacks() {
            console.log('🖼️ Corrigindo fallbacks de imagens...');
            
            function setupHeroImageFallbacksFixed() {
                const heroImages = ['juno', 'atlas', 'vega', 'kai'];
                
                heroImages.forEach(hero => {
                    const img = document.getElementById(`${hero}-preview`);
                    if (img) {
                        // Verificar se nextElementSibling existe antes de usar
                        const fallback = img.nextElementSibling;

                        img.onerror = () => {
                            console.warn(`⚠️ Erro ao carregar imagem do ${hero}, usando fallback`);
                            img.style.display = 'none';
                            if (fallback) fallback.style.display = 'block';
                        };

                        img.onload = () => {
                            console.log(`✅ Imagem do ${hero} carregada com sucesso`);
                            if (fallback) fallback.style.display = 'none';
                        };
                    }
                });
            }
            
            // Aplicar correção
            setupHeroImageFallbacksFixed();
            console.log('✅ Fallbacks de imagens corrigidos');
        }

        // 4. VERIFICAR E CORRIGIR CLASSES FALTANTES
        function checkAndFixMissingClasses() {
            console.log('🔍 Verificando classes faltantes...');
            
            const requiredClasses = [
                'Game', 'Player', 'Enemy', 'Particle', 'Projectile',
                'SpriteManager', 'CombatSystem', 'UIManager', 
                'ShopSystem', 'InventorySystem', 'MissionSystem', 'LobbySystem'
            ];
            
            const missingClasses = requiredClasses.filter(className => 
                typeof window[className] === 'undefined'
            );
            
            if (missingClasses.length === 0) {
                console.log('✅ Todas as classes estão carregadas corretamente!');
                return true;
            } else {
                console.warn('⚠️ Classes ainda faltando:', missingClasses);
                return false;
            }
        }

        // 5. CORRIGIR SPRITE DO KAI
        function fixKaiSprite() {
            console.log('🎨 Corrigindo sprite do Kai...');
            
            // Verificar se o sprite do Kai existe
            const kaiImg = document.getElementById('kai-preview');
            if (kaiImg) {
                // Corrigir caminho do sprite do Kai
                const correctPath = 'assets/images/characters/heroes/juno/kai.png';
                kaiImg.src = correctPath;
                console.log('✅ Caminho do sprite do Kai corrigido');
            }
        }

        // 6. CORRIGIR MENSAGEM DO GAME LOOP
        function fixGameLoopMessage() {
            console.log('📝 Corrigindo mensagem do game loop...');
            
            // Sobrescrever a mensagem incorreta se existir
            if (window.game && window.game.init) {
                const originalInit = window.game.init;
                window.game.init = function() {
                    originalInit.call(this);
                    console.log('Nova Remains - Sistema inicializado com sucesso');
                };
                console.log('✅ Mensagem do game loop corrigida');
            }
        }

        // 7. APLICAR TODAS AS CORREÇÕES
        function applyAllFixes() {
            console.log('🚀 Aplicando todas as correções...');
            
            try {
                defineGlobalClasses();
                fixGameLoop();
                fixHeroImageFallbacks();
                fixKaiSprite();
                fixGameLoopMessage();
                
                // Verificar se tudo está funcionando
                const allGood = checkAndFixMissingClasses();
                
                if (allGood) {
                    console.log('🎉 TODAS AS CORREÇÕES APLICADAS COM SUCESSO!');
                    console.log('🎮 O jogo deve estar funcionando corretamente agora');

                    // Mostrar mensagem de sucesso na tela
                    if (document.body) {
                        const successMsg = document.createElement('div');
                        successMsg.innerHTML = `
                            <div style="
                                position: fixed; 
                                top: 20px; 
                                right: 20px; 
                                background: #4CAF50; 
                                color: white; 
                                padding: 15px; 
                                border-radius: 5px; 
                                z-index: 10000;
                                font-family: Arial, sans-serif;
                                box-shadow: 0 4px 6px rgba(0,0,0,0.1);
                            ">
                                ✅ Bugs corrigidos com sucesso!<br>
                                🎮 Jogo funcionando normalmente
                            </div>
                        `;
                        document.body.appendChild(successMsg);

                        // Remover mensagem após 5 segundos
                        setTimeout(() => {
                            if (successMsg.parentNode) {
                                successMsg.parentNode.removeChild(successMsg);
                            }
                        }, 5000);
                    }

                } else {
                    console.warn('⚠️ Algumas correções podem não ter funcionado completamente');
                    console.log('🔄 Recarregue a página se necessário');
                }
                
            } catch (error) {
                console.error('❌ Erro ao aplicar correções:', error);
            }
        }

        // 8. EXECUTAR CORREÇÕES AUTOMATICAMENTE
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', applyAllFixes);
        } else {
            applyAllFixes();
        }
    </script>
</body>
</html>
